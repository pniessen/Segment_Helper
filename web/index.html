<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Rosetta Consulting Segment Helper</title>

    <!-- Bootstrap Core CSS -->
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="/static/css/grayscale.css" rel="stylesheet">

    <!--- Bootstrap-Switch CSS http://www.bootstrap-switch.org/ -->
<!--     <link href="/static/css/bootstrap.css" rel="stylesheet"> -->
    <link href="/static/css/bootstrap-switch.css" rel="stylesheet">

    <!--- Dragula CSS -->
    <link href='static/css/dragula.min.css' rel='stylesheet' type='text/css' />
<!--     <link href='static/css/example.css' rel='stylesheet' type='text/css' /> -->
    
    <!-- Custom Fonts -->
    <link href="/static/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <!-- <link href="http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css"> -->
    <link href = "/static/css/Lora-400,700,400italic,700italic.css" rel="stylesheet" type="text/css">
    <!-- <link href="http://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css"> -->
    <link href="/static/css/Montserrat-400,700.css" rel="stylesheet" type="text/css">

    <!-- fixed header table  -->
    <link href="/static/css/fht-defaultTheme.css" rel="stylesheet">
    <link href="/static/css/fht-fancytable.css" rel="stylesheet">
    
    <!-- Jquery UI-->
    <link href="static/css/jquery-ui.css" rel="stylesheet">

    <!-- Jquery Filetree -->
   <!--  <link href="static/css/jqueryFileTree.css" rel="stylesheet" type="text/css" media="screen" /> -->

   <!--  Spinner -->
 <!--    <link rel="stylesheet" type="text/css" href="/static/css/ui.spinner.css" /> -->

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->


    <style type="text/css">
    .tg  {border-collapse:collapse;border-spacing:0;}
    .tg td{font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;}
    .tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;}
    .tg .tg-yw4l{vertical-align:top}
    
    /* Sortable tables */
    /*style sheet from http://www.jankoatwarpspeed.com/wp-content/uploads/examples/expandable-rows/*/
    table.sortable thead {
    background-color:#eee;
    color:#666666;
    font-weight: bold;
    cursor: default;
    }
    table.center {
    margin-left:auto; 
    margin-right:auto;
    td { background:#C7DDEE none repeat-x scroll center left; color:#000; padding:7px 15px; }
    tr td { background:#fff url(static/row_bkg.png) repeat-x scroll center left; /*cursor:pointer;*/ }
    }
    
    /*body { font-family:Arial, Helvetica, Sans-Serif; font-size:0.8em;}*/
    #table-goes-here { border-collapse:collapse;}
    #table-goes-here h4 { margin:0px; padding:0px;}
    #table-goes-here img { float:right;}
    #table-goes-here ul { margin:10px 0 10px 40px; padding:0px;}
    #table-goes-here th { background:#7CB8E2 url(static/header_bkg.png) repeat-x scroll center left; color:#fff; padding:7px 15px; text-align:left;}
    #table-goes-here td { background:#C7DDEE none repeat-x scroll center left; color:#000; padding:7px 15px; }
    #table-goes-here tr td { background:#fff url(static/row_bkg.png) repeat-x scroll center left; /*cursor:pointer;*/ }
    #table-goes-here div.arrow { background:transparent url(arrows.png) no-repeat scroll 0px -16px; width:16px; height:16px; display:block;}
    #table-goes-here div.up { background-position:0px 0px;}
    #table-goes-here  { margin-left:auto; margin-right:auto;}
    
    #tracker-goes-here { font-family:Arial, Helvetica, Sans-Serif; font-size:0.8em;}
    #tracker-goes-here { border-collapse:collapse;}
    #tracker-goes-here h4 { margin:0px; padding:0px;}
    #tracker-goes-here img { float:right;}
    #tracker-goes-here ul { margin:10px 0 10px 40px; padding:0px;}
    #tracker-goes-here th { background:#7CB8E2 url(static/header_bkg.png) repeat-x scroll center left; color:#fff; padding:1px 4px; text-align:left;}
    #tracker-goes-here td { background:#C7DDEE none repeat-x scroll center left; color:#000; padding:1px 4px; }
    #tracker-goes-here tr td { background:#fff url(static/row_bkg.png) repeat-x scroll center left; /*cursor:pointer; */}
    #tracker-goes-here div.arrow { background:transparent url(arrows.png) no-repeat scroll 0px -16px; width:16px; height:16px; display:block;}
    #tracker-goes-here div.up { background-position:0px 0px;}
    #tracker-goes-here  { margin-left:auto; margin-right:auto;}

    #run-report-goes-here { font-family:Arial, Helvetica, Sans-Serif; font-size:0.8em;}
    #run-report-goes-here { border-collapse:collapse;}
    #run-report-goes-here h4 { margin:0px; padding:0px;}
    #run-report-goes-here img { float:right;}
    #run-report-goes-here ul { margin:10px 0 10px 40px; padding:0px;}
    #run-report-goes-here th { background:#7CB8E2 url(static/header_bkg.png) repeat-x scroll center left; color:#fff; padding:1px 4px; text-align:left;}
    #run-report-goes-here td { background:#C7DDEE none repeat-x scroll center left; color:#000; padding:1px 4px; }
    #run-report-goes-here tr td { background:#fff url(static/row_bkg.png) repeat-x scroll center left; cursor:pointer; }
    #run-report-goes-here div.arrow { background:transparent url(arrows.png) no-repeat scroll 0px -16px; width:16px; height:16px; display:block;}
    #run-report-goes-here div.up { background-position:0px 0px;}
    #run-report-goes-here  { margin-left:auto; margin-right:auto;}

    #weights-table-goes-here { font-family:Arial, Helvetica, Sans-Serif; font-size:0.8em;}
    #weights-table-goes-here { border-collapse:collapse;}
    #weights-table-goes-here h4 { margin:0px; padding:0px;}
    #weights-table-goes-here img { float:right;}
    #weights-table-goes-here ul { margin:10px 0 10px 40px; padding:0px;}
    #weights-table-goes-here th { background:#7CB8E2 url(static/header_bkg.png) repeat-x scroll center left; color:#fff; padding:1px 4px; text-align:left;}
    #weights-table-goes-here td { background:#C7DDEE none repeat-x scroll center left; color:#000; padding:1px 4px; }
    #weights-table-goes-here tr td { background:#fff url(static/row_bkg.png) repeat-x scroll center left; cursor:pointer; }
    #weights-table-goes-here div.arrow { background:transparent url(arrows.png) no-repeat scroll 0px -16px; width:16px; height:16px; display:block;}
    #weights-table-goes-here div.up { background-position:0px 0px;}
    #weights-table-goes-here { margin-left:auto; margin-right:auto;}

    .run-scoreboard {float: left;}
    .movie {float:left;}
    
    .run-report { font-family:Arial, Helvetica, Sans-Serif; font-size:0.8em;}
    .run-report { border-collapse:collapse; /*float: left;*/}
    .run-report h4 { margin:0px; padding:0px;}
    .run-report img { float:right;}
    .run-report ul { margin:10px 0 10px 40px; padding:0px;}
    .run-report th { background:#7CB8E2 url(static/header_bkg.png) repeat-x scroll center left; color:#fff; padding:1px 4px; text-align:left;}
    .run-report td { background:#C7DDEE none repeat-x scroll center left; color:#000; padding:1px 4px; }
    .run-report tr td { background:#fff url(static/row_bkg.png) repeat-x scroll center left; cursor:pointer; }
    .run-report div.arrow { background:transparent url(arrows.png) no-repeat scroll 0px -16px; width:16px; height:16px; display:block;}
    .run-report div.up { background-position:0px 0px;}
    .run-report  { margin-left:auto; margin-right:auto;}

    .ok {background-color: #fee8c8!important;}
    .good {background-color: #fdbb84 !important;}
    .great {background-color: #e34a33 !important;}

    .ui-spinner input {font-family:Arial, Helvetica, Sans-Serif; font-size:0.8em; width:50px; text-align: center;}
   
    #control-table {left: 50%; margin-left: 300px;}
    #control-table td {padding: 10px 10px 10px 10px; float: center}

    .tab-name {display:none;width:120px;} //[type=text] 
    .tab-name a{display:block;}
    body {overflow: hidden}

   /*   */

    </style>
    <style>
    .btn-file {
      position: relative;
      overflow: hidden;
    }
    .btn-file input[type=file] {
      position: absolute;
      top: 0;
      right: 0;
      min-width: 100%;
      min-height: 100%;
      font-size: 100px;
      text-align: right;
      filter: alpha(opacity=0);
      opacity: 0;
      background: red;
      cursor: inherit;
      display: block;
    }
    
    input[readonly] {
      background-color: white !important;
      cursor: text !important;
      color: black; 
    }
    .container2 {
    float: left;
    width: 25%;
    margin-right: 2%;
    padding: 10px;
    min-height: 300px;
    background-color: rgba(255, 0, 0, 0.2);
    transition: opacity 0.4s ease-in-out;
    }
    .container2 div {
    padding: 10px 15px;
    margin: 10px 0;
    background-color: rgba(255, 0, 0, 0.2);
    }

  .modal-xl {
    width: 1200px;
  }

</style>

</head>

<body id="page-top" data-spy="scroll" data-target=".navbar-fixed-top">

    <!-- Navigation -->
    <nav class="navbar navbar-custom navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header" style="display: none;">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-main-collapse">
                    <i class="fa fa-bars"></i>
                </button>
                <a class="navbar-brand page-scroll" href="#tabz">
                    <i class="fa fa-play-circle"></i>  <span class="light" >Start</span> Segment Helper
                </a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse navbar-right navbar-main-collapse">
                <ul class="nav navbar-nav">
                    <!-- Hidden li included to remove active class from about link when scrolled up past about section -->
                    <li class="hidden">
                        <a href="#page-top"></a>
                    </li>
                    <li id = 'about-link' class = 'login-hide' style="display: none;">
                        <a class="page-scroll" href="#about">About</a>
                    </li>
<!--                     <li>
                        <a class="page-scroll" href="#objective-function">Dimension</a>
                    </li> -->
<!--                     <li>
                        <a class="page-scroll" href="#explorer">Explorer</a>
                    </li> -->
                    <li id = 'load-data-link' class = 'login-hide' style="display: none;">
                        <a class="page-scroll" href="#" onclick = "$('#myModal4').modal('toggle')">Load Data</a>
                    </li>
                    <li id = 'segment-link' class = 'login-hide'  style="display: none;">
                        <a class="page-scroll" href="#tabz">Segment</a>
                    </li>
<!--                     <li>
                        <a class="page-scroll" href="#scorecard">Scorecard</a>
                    </li> -->
<!--                     <li>
                        <a class="page-scroll" href="#contact">Contact</a>
                    </li> -->
                    <li>
                        <a class="page-scroll ui-icon-lock" href="#" onclick = LoginLogout() id = 'login-text'><span class="glyphicon glyphicon-lock" href="#!" bgcolor = 'red' style="color:#B80000" id = 'login-lock'></span>Login</a>
                    </li>
                    <li id = 'save-session-link' class = 'login-hide' style="display: none;">
                        <a class="page-scroll" href="#" onclick = SaveSession()><span class="glyphicon glyphicon-floppy-disk"></span>Save Session</a>
                    </li>
                    <li id = 'load-session-link' class = 'login-hide' style="display: none;">
                        <a class="page-scroll" href="#" onclick = GetFilenames(window.user_id) id = 'load-session'><span class="glyphicon glyphicon-floppy-disk"></span>Load Session</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Intro Header -->
    <header class="intro">
        <div class="intro-body">
            <div class="container">
                <div class="row">
                    <div class="col-md-8 col-md-offset-2">
                        <h1> Rosetta Segment Helper (Beta v2)</h1>
                        <p class="intro-text">'Segment 1.0 in the cloud - let machine learning automate the boring stuff, so you can focus on the fun part'<br></p>
                        <a href="#about" id = 'scroll-circle-link' style="display: none;" class="btn btn-circle page-scroll">
                            <i class="fa fa-angle-double-down animated"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- About Section -->
    <section id="about" class="container content-section text-center">
        <div class="row">
            <div class="col-md-5">
                <h2>Classic Mode:</h2>
                <li><p>Load data file</p></li>
                <li><p>Choose variables to segment by</p></li>
                <li><p>Review results</p></li>
                <li><p>Repeat</p></li>
                <li><p>Download or Save your work</p></li>
                <a href="#tabz" class="btn btn-circle page-scroll">
                    <i class="fa fa-angle-double-down animated"></i>
                </a>
            </div>
            <div class="col-md-5">
                    <h2>"Plus" mode:</h2>
                    <li><p>Load data file</p></li>
                    <li><p>Segment Helper cleans, weights (vs US pop)</p></li>
                    <li><p>Segment Helper suggests cluster seed</p></li>
                    <li><p>Review results</p></li>
                    <li><p>Repeat</p></li>
                    <li><p>Download or Save your work</p></li>
                <a href="#tabz" class="btn btn-circle page-scroll">
                    <i class="fa fa-angle-double-down animated"></i>
                </a>
            </div>
        </div>
    </section>
    
    <!-- Settings Section -->
<!--         <section id="settings" class="container content-section ">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2">
                    <h2>Settings</h2>
                    <p>Load data:
                    <form id="upload-file-2" method="post" enctype="multipart/form-data"> 
                        <fieldset>
                            <div class="input-group">  --> <!-- binds button and file name field together -->
                                <!-- <span class="input-group-btn">   --><!-- also seems to bind button and file name field -->
                                    <!-- <span class="btn btn-primary btn-file"> -->  <!-- makes button square (vs default) -->
                                       <!--  Browse&hellip; <input id = 'upload-button' type="file"> -->
                                    <!-- </span> -->
                               <!--  </span>
                                <input id = 'upload-field' type="text" class="form-control" readonly>
                            </div -->> <!-- input-group -->
<!--                             <button id="upload-file-btn-2" type="button">Upload</button>
                        </fieldset>
                    </form> 
                    <p>Number of clusters: <input type="text" style="color:black" color="black" value="6"</p>
                    <p>Export to Excel (yes/no)  <input type="checkbox" name="xls-checkbox" ></p>
                    <p>Grid search (yes/no)  <input type="checkbox" name="gridsearch-checkbox" ></p>
                    <form name="gridsearch">
                        <ul>
                            <li><h6>Grid depth (+/- clusters):<input type="text" name="num-clusters" value="3" style="color:black"><br></h6></li>
                            <li><h6>Grid width (+/- variables):<input type="text" name="num-variables" value="5" style="color:black"></h6></li>
                        </ul>
                    </form>
                </div>
            </div>
        </div>
        </section> -->
   <!-- Explorer Section -->
   <!-- see http://jsfiddle.net/TylerODonnell/h42w6t8j/ -->
  <!--  also see http://v4-alpha.getbootstrap.com/components/buttons/ -->
        <section id="objective-function" class="container content-section text-center">

<!--             Cats:  <input name="animal" type="checkbox" value="Cats" id = "box1">
            Dogs:  <input name="animal" type="checkbox" value="Dogs" id = "box2"> -->

<!--         <div class="row"><h2>Explorer</h2>
            <div class="col-md-5"><h4>Pick the questions for clustering:</h4></div> -->
<!--             <div class="col-md-1">2</div>
            <div class="col-md-1">3</div>
            <div class="col-md-1">4</div>
            <div class="col-md-1">5</div>
            <div class="col-md-1">6</div> -->
            <!-- <div class="col-md-1"></div> -->
<!--             <div class="col-md-1">
                <button type="button" class="btn btn-primary"><i class="fa fa-play-circle"></i><a id="link-portfolio" href="#run-tracker" onclick="SubmitData()">Go!</button></a></div>

                <button type="button" id = 'grid-button' class="btn btn-primary" data-toggle="button" aria-pressed="true" autocomplete="off">
                    Grid:<div id='grid-on-off'>off</div></button>
                <button type="button" id = 'excel-button' class="btn btn-primary" data-toggle="button" aria-pressed="false" autocomplete="off">
                    Excel:<div id='excel-on-off'>off</div></button>

                <div class="col-md-1">                <div class="dropdown closed">
                  <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenu1-label" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    # Seg<div id="number-of-segments-2"></div> 
                  </button>
                  <div class="dropdown-menu" aria-labelledby="dropdownMenu2" id = 'dropdown-menu-1'>
                    <button class="dropdown-item" type="button" style="color:black">1</button>
                    <button class="dropdown-item" type="button" style="color:black">2</button>
                    <button class="dropdown-item" type="button" style="color:black">3</button>
                    <button class="dropdown-item" type="button" style="color:black">4</button>
                    <button class="dropdown-item" type="button" style="color:black">5</button>
                    <button class="dropdown-item" type="button" style="color:black">6</button>
                    <button class="dropdown-item" type="button" style="color:black">7</button>
                    <button class="dropdown-item" type="button" style="color:black">8</button>
                  </div>
                </div>
            </div>
            <div class="col-md-1">                <div class="dropdown closed">
                    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fa fa-play-circle fa-flip-horizontal"></i> Rewind</button>

                     <div class="dropdown-menu" aria-labelledby="dropdownMenu2" id='dropdown-menu-2'>
                    <button class="dropdown-item" type="button" style="color:black">R1</button>
                    <button class="dropdown-item" type="button" style="color:black">R2</button>
                    <button class="dropdown-item" type="button" style="color:black">R3</button>
                    <button class="dropdown-item" type="button" style="color:black">R4</button>
                    <button class="dropdown-item" type="button" style="color:black">R5</button>
                    <button class="dropdown-item" type="button" style="color:black">R6</button>
                    <button class="dropdown-item" type="button" style="color:black">R7</button>
                    <button class="dropdown-item" type="button" style="color:black">R8</button>
                  </div>
                </div>
            </div>
        </div> -->

           <!-- http://www.erummunir.com/240/clear-text-on-input-field-on-click -->
<!--         <div class="row">
                    <div class="btn-group" role="group" aria-label="...">
                    <button type="button" id = 'objective-function-button' onclick=getExplorerIds() class="btn btn-primary ">Create</button>
                    <div class="btn-group" role="group" aria-label="...">
                        <div class="dropdown">
                    <button id = 'objective-function-chooser' class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Dimensions
                      <span class="caret"></span></button>
                      <ul id = 'objective-function-dropdown' class="dropdown-menu dropdown-menu-right">
                      </ul>
                    </div>
                </div>  
            </div>
            <p>
        </div>  
        <div class="row">
            <div class="container2" id = 'explorer-left'> <h5>Potential Variables</h5></div>
            <div class="container2" id="explorer-right"><h5>Dimension</h5><input id='objective-function-field' style="color:black" type = text onclick="this.value='';" onfocus="this.select()" onblur="this.value=!this.value?'<enter name>':this.value;" value="<enter name>"></div>
        </div>  -->
<!--             <div class="dropdown">
              <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                Dropdown
                <span class="caret"></span>
              </button>
              <ul id = 'dropdown-test' class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenu1">
                <li>Action</li>
                <li><a href="#!">Another action</a></li>
                <li><a href="#!">Something else here</a></li>
              </ul>
            </div>
            <select id="ddlViewBy">
              <option value="1">test1</option>
              <option value="2" selected="selected">test2</option>
              <option value="3">test3</option>
            </select>   --> 
       </section>

    <!-- Run Tracker Section -->
<!--         <section id="run-tracker" class="container content-section text-center">
            <h2>Run Tracker</h2>
            <table class="tg" class="sortable" class="fancyTable" id = 'myTracker' cellpadding="0" cellspacing="0">
            <div id="tracker-goes-here" class = "center"></div>
                <td id = 'cat'>Cats:  <input name="animal" type="checkbox" value="Cats" id = "box3"></td>
                <td id = 'dog'>Dogs:  <input name="animal" type="checkbox" value="Dogs" id = "box4"></td> -->
            <!-- </div>  -->
            <!-- </table> -->
        <!-- </section> --> -->
    
    <!-- Scorecard Section --> 
<!--         <section id="scorecards" class="content-section text-center">
            <h2>Cluster Scorecard</h2>
            <table class="tg" class="sortable" id = 'myTable' >
            <div id="table-goes-here" class = "center"></div> 
            </table>
        <!-- <ul id="navigation">
            <li><a id="link-portfolio" href="#data" onclick="GetTrainingData()">See Data</a></li>
        </ul> --> -->
        <!-- </section> -->

        <!-- Tabs -->
        <section id='tabz' class="content-section text-center">
            <h2>Segment</h2>
        <div class = 'row' id = 'basic-toolbar'>
            <div class="btn-toolbar center" role="toolbar" aria-label="...">
                <div class="btn-group" role="group" aria-label="...">
                <a id="link-portfolio" href="#tabz" onclick="SubmitData()"><button type="button" class="btn btn-primary "><i class="fa fa-play-circle"></i> Go!</button></a>
                  <div class="btn-group" role="group">
                    <button type="button" class="btn btn-primary dropdown-toggle" id="dropdownMenu1-label-2a" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      # Seg 
                      <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" id = 'dropdown-menu-1a'>
                      <li><a href="#!">4</a></li>
                      <li><a href="#!">5</a></li>
                      <li><a href="#!">6</a></li>
                      <li><a href="#!">7</a></li>
                      <li><a href="#!">8</a></li>
                      <li><a href="#!">9</a></li>
                      <li><a href="#!">10</a></li>
                      <li><a href="#!">11</a></li>
                      <li><a href="#!">12</a></li>
                    </ul>
                  </div> <!-- btn-group dropdown wrapper -->
                </div>
                <div class="btn-group" role="group" aria-label="...">
                  <!-- <button type="button" class="btn btn-primary">Method</button> -->
<!--                   <div class="btn-group" role="group">
                    <button type="button" class="btn btn-primary dropdown-toggle" id="dropdownMenuX" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      Method 
                      <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" id = 'dropdown-menu-X'>
                      <li><a href="#!">poLCA</a></li>
                      <li class="disabled"><a href="#!">Kmeans</a></li>
                      <li class="disabled"><a href="#!">DBScan</a></li>
                      <li class="disabled"><a href="#!">AffinityProp</a></li>
                      <li class="disabled"><a href="#!">Ensemble</a></li>
                    </ul>
                  </div> --> <!-- btn-group dropdown wrapper -->
       <!--            <button type="button" class="btn btn-primary">Grid?</button> -->
<!--                   <button type="button" id = 'grid-button-X' class="btn btn-primary" data-toggle="button" aria-pressed="true" autocomplete="off" bgcolor = 'red'> 
                    Grid<!-- <div id='grid-on-off'>off</div> --></button> 
                  <button id = 'objective-function-toggle' type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal2">Obj Func</button>
<!--                   <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal"><span class="glyphicon glyphicon-cloud-upload"></span> Upload</button> -->

                  <a href = '/download' class="btn btn-primary"><span class="glyphicon glyphicon-cloud-download"></span> Download</a>
                  <button type="button" id = 'advanced-button' onclick="$('#advanced-toolbar').toggle()" class="btn btn-primary"><span class="glyphicon glyphicon-wrench"></span> Advanced</button>
                </div>
            </div>
        </div>
        <p>
        <div class = 'row' id = 'advanced-toolbar'>
            <div class="btn-toolbar center" role="toolbar" aria-label="..." id = 'advanced-toolbar'>
                <div class="btn-group" role="group" aria-label="...">
                    <div class="btn-group" role="group">
                        <button type="button" class="btn btn-primary dropdown-toggle" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Method <span class="caret"></span></button>
                        <ul class="dropdown-menu" id = 'dropdown-menu-2'>
                            <li><a href="#!">poLCA</a></li>
                            <li><a href="#!">Kmeans</a></li>
                            <li><a href="#!">Spectral</a></li>
                            <li><a href="#!">Birch</a></li>
                            <li class="divider"></li>
                            <li><a href="#!">AffinityProp</a></li>
                            <li><a href="#!">DBScan</a></li>
                            <li><a href="#!">AgClust</a></li>
                            <li><a href="#!">MeanShift</a></li>
                            <li class="disabled"><a href="#!">Ensemble</a></li>
                        </ul>
                      </div> <!-- btn-group dropdown wrapper -->
                        <button type="button" id = 'grid-button' class="btn btn-primary" data-toggle="button" aria-pressed="true" autocomplete="off" bgcolor = 'red'> Grid<!-- <div id='grid-on-off'>off</div> --></button>
                    <button type="button" id = 'cluster-seed-button' class="btn btn-primary">Cluster Seed</button>
                    <button type="button" id = 'hide-col-button' class="btn btn-primary">Hide Col</button> 
                    <button type="button" id = 'compare-run-button' class="btn btn-primary">Compare Runs</button>
                    <!-- onclick = "$('#myModal5').modal('toggle')"  -->  
                </div>
            </div>
        </div>
        <!-- <div class="row">
            <table id = 'control-table'>
                <tr>
            <div class="col-md-5"></div>
            <div class="col-md-1">
                <td>
                    <a id="link-portfolio" href="#tabz" onclick="SubmitData()"><button type="button" class="btn btn-primary "><i class="fa fa-play-circle"></i>Go!</button></a>
                </td>
            </div>
            <div class="col-md-1">
                <td>
                    <button type="button" id = 'grid-button' class="btn btn-primary" data-toggle="button" aria-pressed="true" autocomplete="off">
                    Grid:<div id='grid-on-off'>off</div></button>
                </td>
            </div>
            <div class="col-md-1"> 
                <td>
                    <a href = '/download' class="btn btn-primary">Download!</a>  
                </td> 
                <a href = '/download' button type="button" id = 'excel-button' class="btn btn-primary" data-toggle="button" aria-pressed="false" autocomplete="off">
                    Excel:<div id='excel-on-off'>off</div></button></a>
            </div>
            <div class="col-md-1">
                <td>
                    <div class="dropdown closed">
                      <button class="btn btn-secondary dropdown-toggle" type="button btn-block" id="dropdownMenu1-label-2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        # Seg<div id="number-of-segments"></div> 
                      </button>
                      <div class="dropdown-menu" aria-labelledby="dropdownMenu2" id = 'dropdown-menu-1'>
                        <button class="dropdown-item" type="button" style="color:black">1</button>
                        <button class="dropdown-item" type="button" style="color:black">2</button>
                        <button class="dropdown-item" type="button" style="color:black">3</button>
                        <button class="dropdown-item" type="button" style="color:black">4</button>
                        <button class="dropdown-item" type="button" style="color:black">5</button>
                        <button class="dropdown-item" type="button" style="color:black">6</button>
                        <button class="dropdown-item" type="button" style="color:black">7</button>
                        <button class="dropdown-item" type="button" style="color:black">8</button>
                      </div>
                    </div> 
                </td>
            </div>
            <div class="col-md-1">
                <td>
                    <div class="dropdown closed">
                        <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fa fa-play-circle fa-flip-horizontal"></i> Method</button>

                         <div class="dropdown-menu" aria-labelledby="dropdownMenu2" id='dropdown-menu-2'>
                        <button class="dropdown-item" type="button" style="color:black">LCA</button>
                        <button class="dropdown-item" type="button" style="color:black">K-means</button>
                        <button class="dropdown-item" type="button" style="color:black">DBScan</button>
                        <button class="dropdown-item" type="button" style="color:black">TensorFlow</button>
                        <button class="dropdown-item" type="button" style="color:black">AffinityProp</button>
                        <button class="dropdown-item" type="button" style="color:black">Ensemble</button>
                      </div>
                    </div>
                </td>
                <td>
                    <form id="upload-file" method="post" enctype="multipart/form-data">
                        <fieldset>
                            <div class='input-group'>
                                <span class="input-group-btn">
                                    <span class="btn btn-primary btn-file">
                                        Browse&hellip;<input id = 'file-search-2' name="file" type="file">
                                    </span>
                                </span><input id = 'upload-field-2' type="text" class="form-control" readonly>
                            </div>
                            <button id="upload-file-btn" class="btn btn-primary btn-file" type="button">Upload</button>
                        </fieldset>
                    </form> 
                </td>
            </tr>
        </table>
            </div> -->
        </div>
    </div>
    </div>
    <!-- <button id='add-tab'>Add tab</button> -->
    <div class="row"></row>
        <p>

    <div class="row">
            <!-- <h2 class="demoHeaders">Run Tracker 2</h2> -->
            <div id="tabs">
                <ul id='tab-list'>
                    <li class = 'tab' id = 'tab-tab-1'><input id = 'tab-name-1' style="color:black" class="tab-name" type="text"/><a href="#tabs-1">Run Manager</a></li>
<!--                     <li class = 'tab' id = 'tab-tab-0'><input id = 'tab-name-0' style="color:black" class="tab-name" type="text"/><a href="#tabs-0">Data</a></li> -->
                </ul>
                <div id="tabs-1"><div id="tracker-goes-here" class = "center"></div>some text</div>
<!--                 <div id="tabs-0"><div id="weights-table-goes-here" class = "center" ></div>some data</div> -->
            </div>
        </div>  
    </section>

    <!-- Contact Section -->
    <section id="contact" class="container content-section text-center">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2">
                <h2>Contact Us!</h2>
                <p>Feel free to email us to provide some feedback!</p>
                <p><a href="mailto:peter.niessen@rosetta.com">peter.niessen@rosetta.com</a></p>
                <p><a href="mailto:matt.dietly@rosetta.com">matt.dietly@rosetta.com</a></p>

            </div>
        </div>
    </section>

    <!-- Map Section -->
    <!-- Modal -->
    <div id="myModal" class="modal fade" role="dialog">
      <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" >&times;</button>
            <h4 class="modal-title" style="color:black">Choose a file to upload</h4>
          </div>
          <div class="modal-body">
            <form id="upload-file" method="post" enctype="multipart/form-data">
<!--                         <fieldset>
                            <div class='input-group'>
                                <span class="input-group-btn">
                                    <span class="btn btn-primary btn-file">
                                        Responders&hellip;<input id = 'file-search-3' name="file" type="file">
                                    </span>
                                </span><input id = 'upload-field-3' type="text" class="form-control" readonly>
                            </div>
                        </fieldset> -->
                        <fieldset>
                            <div class='input-group'>
                                <span class="input-group-btn">
                                    <span class="btn btn-primary btn-file">
                                        Responses&hellip;<input id = 'file-search-2' name="file" type="file">
                                    </span>
                                </span><input id = 'upload-field-2' type="text" class="form-control" readonly>
                            </div>

                            <button id="upload-file-btn" class="btn btn-primary btn-file" type="button">Upload</button>
                        </fieldset>

                    </form> 
           <!--  <p>Some text in the modal.</p> -->
          </div>
<!--           <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div> -->
        </div>

      </div>
    </div>
    <!-- another modial -->
 <div id="myModal2" class="modal fade" role="dialog">
      <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title" style="color:black">Create an objective function:</h4>
          </div>
          <div class="modal-body">
           <!--  <p>Some text in the modal.</p> -->
           <div class="btn-group" role="group">
                    <button type="button" class="btn btn-primary dropdown-toggle" id="dropdownMenu1-label-2a" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      Question
                      <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" id = 'dropdown-menu-3'>

                  </div> <!-- btn-group dropdown wrapper -->
                  <button id="create-objective-btn" class="btn btn-primary btn-file" type="button">Create Objective Function Anchor</button>
          </div>
        </div>
      </div>
    </div> <!-- end Mymodial2 -->
 <!-- yet another modial -->
     <div id="myModal3" class="modal" role="dialog">
          <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" onclick = cleanUpLogin()>&times;</button>
                <h4 class="modal-title" style="color:black">Please log in:</h4>
              </div> <!-- modal-header -->
              <div class="modal-body">
                <form class="form" method="post" style="color:black" action="#">
                    <label>Email :</label>
                    <input type="text" name="demail" id="user-id">
                    <label>Password :</label>
                    <input type="password" name="password" id="password">
                    <input type="button" class = 'btn btn-primary' name="login" id="login" value="Login">
                    <br>
                </form>
                <div style="color:black"><input type = 'checkbox' id = 'login-check'> Please save my email for future logins (next 7 days only)</div>
              </div> <!-- modal-body -->
            </div> <!-- modal-content -->
          </div> <!-- modal-dialog -->
        </div> <!-- end Mymodial3 -->
<!-- Yet another another modal -->
    <div id="myModal4" class="modal fade" role="dialog">
      <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title" style="color:black">Choose files to upload</h4>
          </div>
          <div class="modal-body">
            <form id="upload-file-2" method="post" enctype="multipart/form-data">
                        <fieldset>
                            <div class='input-group'>
                                <span class="input-group-btn">
                                    <span class="btn btn-primary btn-file">
                                        Weights&hellip;<input id = 'file-search-4' name="file" type="file">
                                    </span>
                                </span><input id = 'upload-field-4' type="text" class="form-control" readonly>
                            </div>
                        </fieldset>
            </form> 
            <form id="upload-file-3" method="post" enctype="multipart/form-data">
                        <fieldset>
                            <div class='input-group'>
                                <span class="input-group-btn">
                                    <span class="btn btn-primary btn-file">
                                        Responses&hellip;<input id = 'file-search-3' name="file" type="file">
                                    </span>
                                </span><input id = 'upload-field-3' type="text" class="form-control" readonly>
                            </div>

                            <button id="upload-file-btn-2" class="btn btn-primary btn-file" type="button">Upload</button>
                        </fieldset>
            </form> 
           <!--  <p>Some text in the modal.</p> -->
          </div>
<!--           <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div> -->
        </div>

      </div>
    </div>
<!-- Even another another another modal -->
    <div id="myModal5" class="modal fade modal-xl" role="dialog">
      <div class="modal-dialog modal-xl">

        <!-- Modal content-->
        <div class="modal-content modal-xl">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" onclick = cleanUpComparison() >&times;</button>
            <h4 class="modal-title" style="color:black">Choose runs to compare</h4>
          </div>
          <div class="modal-body modal-xl" style="color:black">
            
           <!--  <p>Some text in the modal.</p> -->
        <div class="row">
            <div class="btn-group" role="group">
                    <button type="button" class="btn btn-primary dropdown-toggle" id="dropdownMenu1-label-4" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      Run 'A'
                      <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" id = 'dropdown-menu-4'>

                  </div> <!-- btn-group dropdown wrapper -->
                  vs.
            <div class="btn-group" role="group">
                    <button type="button" class="btn btn-primary dropdown-toggle" id="dropdownMenu1-label-4a" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      Run 'B'
                      <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" id = 'dropdown-menu-4a'>

                  </div> <!-- btn-group dropdown wrapper -->
                  <button id="compare-run-button-2" class="btn btn-primary btn-file" type="button">Compare Runs</button>
          </div><!-- btn-group dropdown wrapper -->
          <div class = 'tg table-goes-here fancyTable' id='run-a-goes-here' style="color:black"></div>
          <div class = 'tg table-goes-here fancyTable' id='run-b-goes-here' style="color:black"></div>
          </div>
       </div> <!-- row -->  
<!--           <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div> -->
        </div>

      </div>
    </div>
    <!-- Even more modal -->
    <div id="myModal6" class="modal fade" role="dialog">
      <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" onclick = cleanUpSavedSession() >&times;</button>
            <h4 class="modal-title" style="color:black">Choose a saved session to load</h4>
          </div>
          <div class="modal-body" style="color:black">
            
           <!--  <p>Some text in the modal.</p> -->
            <div class="btn-group" role="group">
                    <button type="button" class="btn btn-primary dropdown-toggle" id="dropdownMenu1-label-5" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      Choose Session
                      <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" id = 'dropdown-menu-5'>

                  </div> <!-- btn-group dropdown wrapper -->

                  <button id="load-session-button" class="btn btn-primary btn-file" type="button">Load Saved Session</button>
          </div><!-- btn-group dropdown wrapper -->

          </div>
       </div> <!-- row -->  
<!--           <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div> -->
        </div>

      </div>
    <!-- Footer -->
    <footer>
        <div class="container text-center">
            <p>Copyright &copy; Your Website 2014</p>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="static/js/jquery.js"></script>
    // <!-- <script src="//code.jquery.com/jquery-1.8.3.js"></script> -->
    <script src="static/js/jquery-ui.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="static/js/bootstrap.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="static/js/jquery.easing.min.js"></script>

    <!-- Google Maps API Key - Use your own API key to enable the map feature. More information on the Google Maps API can be found at https://developers.google.com/maps/ -->
    <!--     // <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCRngKslUGJTlibkQ3FkfTxj3Xss1UlZDA&sensor=false"></script> -->

    <!-- Custom Theme JavaScript -->
    <script src="static/js/grayscale.js"></script>
    
    <!-- Sorttable -->
    <!-- <script src="http://www.kryogenix.org/code/browser/sorttable/sorttable.js"></script> -->
    <script src="/static/js/sorttable.js"></script>

    <!-- Bootstrap-Switch (http://www.bootstrap-switch.org/) -->
    <script src="/static/js/bootstrap-switch.js"></script>

    <!-- Fixed header and left column -->
    <!-- https://github.com/markmalek/Fixed-Header-Table -->
    <script src="/static/js/jquery.fixedheadertable.js"></script>

    <!--  Closeable  https://github.com/andrewwatts/ui.tabs.closable -->
    <!-- <script src="/static/js/ui.tabs.closable.js"></script> -->

    <!-- socket-io -->
    <!-- https://github.com/shanealynn/async_flask/blob/master/templates/index.html -->
    <script src=" http://cdnjs.cloudflare.com/ajax/libs/socket.io/0.9.16/socket.io.min.js"></script>
    // <!-- <script src="https://cdn.socket.io/socket.io-1.4.5.js"></script> -->
    
    <!-- jQquery FileTree -->
    <!-- http://www.abeautifulsite.net/jquery-file-tree/#demo -->
    <script src="/static/js/jqueryFileTree.js" type="text/javascript"></script>

    <script>
    // turns on / off waiting screen
    // http://dotnetspeak.com/2013/05/creating-simple-please-wait-dialog-with-twitter-bootstrap
    // http://jsfiddle.net/terryr2015/qzzxuuj7/
    // on: myApp.showPleaseWait();
    // off: myApp.hidePleaseWait();
    var myApp;
    myApp = myApp || (function () {
        var pleaseWaitDiv = $('<div class="modal fade" style=top:40% id="pleaseWaitDialog" data-backdrop="static" data-keyboard="false"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h4 class="modal-title" style="color:black" >Processing - please wait...</h4></div><div class="modal-body"><div class="progress"><div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%"></div></div></div></div></div></div>');
        return {
            showPleaseWait: function () {
                pleaseWaitDiv.modal();
            },
            hidePleaseWait: function () {
                pleaseWaitDiv.modal('hide');
            },
        };
    })();
    </script>
   
    <!--  which boxes in run_tracker have been checked?  -->
    <script>
    // Pass the checkbox name to the function
    function getCheckedBoxes(chkboxName) {
      var checkboxes = document.getElementsByName(chkboxName);
      var checkboxesChecked = [];
      // loop over them all
      for (var i=0; i<checkboxes.length; i++) {
         // And stick the checked ones onto an array...
         if (checkboxes[i].checked) {
            checkboxesChecked.push(checkboxes[i].value);
         }
      }
      // Return the array if it is non-empty, or null
      return checkboxesChecked.length > 0 ? checkboxesChecked : null;
    }
    // Call as
    var checkedBoxes = getCheckedBoxes("mycheckboxes");
    </script>

    <!-- Load scorecard table data -->
    <script>
    function GetTrainingData () {
        console.log('in GetTrainingData function');
        data_to_send = $.param({ session_id: window.session_id});
        $.ajax({
             type: "GET",
             contentType: "application/json; charset=utf-8",
             url: "/data",
             dataType: "json",
             async: true,
             data: data_to_send,
             success: function (training_data) {console.log(training_data);
                                        //MakeTable(training_data);
                                        //createTable(training_data);
                                        //loadTrainingImage(training_data);
             },
             error: function (training_data) {console.log(training_data);
            }
           });
    };      
    </script>
<script>
function SubmitObjectiveFunction (objective_functions) {
    console.log('in SubmitObjectiveFunction function');  
    console.log(objective_functions);
    var data_to_send = JSON.stringify(objective_functions);
    console.log(data_to_send);      
    $.ajax({
         type: "POST",
         contentType: "application/json; charset=utf-8",
         url: "/submit_objective_function",
         dataType: "json",
         async: true,
         // data: "{\"keywords\": \"romantic,beer,family\", \"neighborhoods\":\"\", \"cuisines\":\"Sushi\"}",
         data: data_to_send,
         success: function (data_to_send) {console.log('success', data_to_send);

         },
         error: function (results3) {console.log('error', results);
        }
       });
    };
</script>
<script>
function SubmitDimension (new_dimension) {
    console.log('in SubmitDimension function');  
    console.log(new_dimension);
    var data_to_send = JSON.stringify([window.session_id, new_dimension]);
    console.log(data_to_send);      
    $.ajax({
         type: "POST",
         contentType: "application/json; charset=utf-8",
         url: "/submit_dimension",
         dataType: "json",
         async: true,
         // data: "{\"keywords\": \"romantic,beer,family\", \"neighborhoods\":\"\", \"cuisines\":\"Sushi\"}",
         data: data_to_send,
         success: function (data_to_send) {console.log('success', data_to_send);

         },
         error: function (results5) {console.log('error', results5);
        }
       });
    };
</script>
<script>
function SaveSession (user_id, session_id) {
    console.log('in SaveSession function');  
    //console.log(new_dimension);
    var data_to_send = JSON.stringify([window.user_id, window.session_id]);
    console.log(data_to_send);      
    $.ajax({
         type: "POST",
         contentType: "application/json; charset=utf-8",
         url: "/save",
         dataType: "json",
         async: true,
         data: data_to_send,
         success: function (data_to_send) {
            console.log('success, file saved', data_to_send);
            //z = document.getElementById('tracker-goes-here');
            //z.removeChild(z.lastChild);
            //clearTabs();
            //StartTrackerData ();
            //addColumn();
            //UpdateTrackerData ();
         },
         error: function (results6) {console.log('error', results6);
        }
       });
    };
</script>
<script>
function LoadSessionFile (user_id, filename) {
    console.log('in LoadSessionFile function');
    window.session_id = UUID(); //new file = new session_id
    console.log('new session_id:', window.session_id);
    createCookie('session_id', session_id, 7);
    console.log('new session_id cookie:', document.cookie);  
    var data_to_send = JSON.stringify([window.user_id, filename]);
    console.log(data_to_send);      
    $.ajax({
         type: "POST",
         contentType: "application/json; charset=utf-8",
         url: "/load_session",
         dataType: "json",
         async: true,
         data: data_to_send,
         success: function (data_to_send) {
            console.log('success', data_to_send);
            //z = document.getElementById('tracker-goes-here');
            //z.removeChild(z.lastChild);
            clearTabs();
            StartTrackerDataFromSavedSession ();
            //addColumn();
            //UpdateTrackerData (); (moved to StatTrackerFromSavedSession)
            $('#myModal6').modal('toggle');
            cleanUpSavedSession();
         },
         error: function (results7) {console.log('error', results7);
        }
       });
    };
</script>
<script>
function SubmitSessionId (user_id, session_id) {
    console.log('in SubmitSessionID function');  
    console.log('user_id:', user_id);
    console.log('session_id:', session_id);
    var data_to_send = JSON.stringify([window.user_id, window.session_id]);
    console.log(data_to_send);      
    $.ajax({
         type: "POST",
         contentType: "application/json; charset=utf-8",
         url: "/submit_session_id",
         dataType: "json",
         async: true,
         // data: "{\"keywords\": \"romantic,beer,family\", \"neighborhoods\":\"\", \"cuisines\":\"Sushi\"}",
         data: data_to_send,
         success: function (data_to_send) {
            console.log('success', data_to_send);
            //console.log('same?', results4 == window.session_id);

         },
         error: function (results4) {
            console.log('error', results4);
            console.log('same?', results4 == session_id);
        }
       });
    };

files = []    
function GetFilenames (user_id) {
    console.log('in GetFilenames function');  
    //console.log('user_id:', user_id);
    var data_to_send = JSON.stringify(window.user_id);
    //console.log(data_to_send);      
    $.ajax({
         type: "POST",
         contentType: "application/json; charset=utf-8",
         url: "/filenames",
         dataType: "json",
         async: true,
         // data: "{\"keywords\": \"romantic,beer,family\", \"neighborhoods\":\"\", \"cuisines\":\"Sushi\"}",
         data: data_to_send,
         success: function (files) {
            LoadSession(files);
            //window.filenames = files
            //console.log('filelist:', files);
            //return filenames;
            //console.log('same?', results4 == window.session_id);

         },
         error: function (results6) {
            //console.log('error', results4);
            //console.log('same?', results4 == session_id);
        }

       });
    };
</script>
<script>
function SubmitData () {
    console.log('in SubmitData function');  
    // var explorer_ids = getExplorerIds();
    var checkbox_ids = getCheckedBoxes('tcheck');
        // xls_out = true,
        // grid_search = true;
    if (grid_search == 'on') {grid_search_flag = true} else {grid_search_flag = false};
    if (xls_out == 'off') {xls_out_flag = false} else {xls_out_flag = true};
    if (num_segments <= 0){num_segments = 5};   

    var data_to_send = {};
    data_to_send['session_id'] = window.session_id;
    data_to_send['questions'] = checkbox_ids;
    data_to_send['segments'] = num_segments;
    data_to_send['xls'] = xls_out_flag;
    data_to_send['grid_search'] = grid_search_flag;
    data_to_send['method'] = method;
    var data_to_send = JSON.stringify(data_to_send);
   
    console.log(data_to_send, checkbox_ids);      
    //$('#pleaseWaitDialog').show(); // show loading message
    myApp.showPleaseWait();
    $.ajax({
         type: "POST",
         contentType: "application/json; charset=utf-8",
         url: "/submit_data",
         dataType: "json",
         async: true,
         // data: "{\"keywords\": \"romantic,beer,family\", \"neighborhoods\":\"\", \"cuisines\":\"Sushi\"}",
         data: data_to_send,
         success: function (data) {console.log(data);
                                // GetTrainingData();
                                UpdateTrackerData ();
                                GetTrainingData (); 
                                myApp.hidePleaseWait(); 
         },
         error: function (result) {console.log(result);
        }
       });
    };
</script>

    <!-- create scorecard_table -->

    <script>
    window.tracker_data = [];
    function UpdateTrackerData () {
        console.log('in UpdateTrackerData function');
        data_to_send = $.param({ session_id: window.session_id});
        $.ajax({
             type: "GET",
             contentType: "application/json; charset=utf-8",
             url: "/tracker",
             dataType: "json",
             async: true,
             data: data_to_send,
             success: function (tracker_data) {
                console.log('tracker data:', tracker_data);
                window.tracker_data = tracker_data;
                appendColumn(tracker_data);
                makeRunReport(tracker_data);
                //loadGraphImages(); // async graph load
             },
             error: function (tracker_data) {console.log(tracker_data);
            }
           });
    };      
    </script>

    <script>
    var corr_matrix = {};
    var cluster_seed = {};
    var visual_flag = true;
    
    function StartTrackerData () {
        console.log('in StartTrackerData function');
        console.log('session_id:', window.session_id);
        data_to_send = $.param({ session_id: window.session_id});
        $.ajax({
             type: "GET",
             contentType: "application/json; charset=utf-8",
             url: "/create_tracker",
             dataType: "json",
             async: true,
             data: data_to_send,
             success: function (first_tracker_data) {
                console.log('in StartTrackerData function');
                visual_flag = first_tracker_data.visual_mode[0];
                console.log('visual_flag:', visual_flag);
                console.log('first_tracker_data:', first_tracker_data);                
                corr_matrix = first_tracker_data.corr_matrix;
                cluster_seed = first_tracker_data.cluster_seed;
                startTracker(first_tracker_data);
                //fillExplorer(first_tracker_data);

                //loadTrainingImage(training_data);
             },
             error: function (first_tracker_data) {console.log(first_tracker_data);
            }
           });
    };

    function StartTrackerDataFromSavedSession () {
        console.log('in StartTrackerDataFromSavedSession function');
        console.log('session_id:', window.session_id);
        data_to_send = $.param({ session_id: window.session_id});
        $.ajax({
             type: "GET",
             contentType: "application/json; charset=utf-8",
             url: "/create_tracker_from_saved_session",
             dataType: "json",
             async: true,
             data: data_to_send,
             success: function (first_tracker_data) {
                console.log('in StartTrackerDataFromSavedSession function');
                visual_flag = first_tracker_data.visual_mode[0];
                console.log('visual_flag:', visual_flag);
                console.log('first_tracker_data:', first_tracker_data);                
                corr_matrix = first_tracker_data.corr_matrix;
                cluster_seed = first_tracker_data.cluster_seed;
                startTracker(first_tracker_data);
                UpdateTrackerData ();
                //fillExplorer(first_tracker_data);

                //loadTrainingImage(training_data);
             },
             error: function (first_tracker_data) {console.log(first_tracker_data);
            }
           });
    };       
    </script>

    <!-- create tracker_table -->
    <script>
    function createTracker(tracker_data){
         
        mytable = $('<table></table>').attr({ id: "trackerTable" }).attr({class: 'tg center table-goes-here'});
        var rows = tracker_data.tracker.length;
        console.log (rows);
        var cols =  Object.keys(tracker_data.tracker[0]).length;
        var cols_names = Object.keys(tracker_data.tracker[0]);
        var header_row = $('<tr></tr>').appendTo(mytable);
        header_row.append("<th>" + "</th>");
        for (var h = 0; h < cols; h++) {
            var header_name = cols_names[h];
            if (h < 11) {header_name = cols_names[h].slice(4)};
            console.log(header_name);
            $('<th></th>').text(header_name).appendTo(header_row);}
        for (var i = 0; i < rows; i++) {
            var row = $('<tr></tr>').appendTo(mytable);
            var cols_names = Object.keys(tracker_data.tracker[i]);
            row.append("<td><input type='checkbox'>" + "</td>").attr({id:'ttable-' + (i+1) + '-0'});
  
            for (var j = 0; j < cols; j++) {
                if (j == 0) {$('<td></td>').text(tracker_data.tracker[i][cols_names[j]]).attr({id:'ttable-'+ (i+1) + "-" + (j+1)}).appendTo(row);}
                else {$('<td></td>').text(tracker_data.tracker[i][cols_names[j]]).attr({id:'ttable-'+ (i+1) + "-" + (j+1)}).appendTo(row);} 
            }
                     
        }
        
        mytable.appendTo("#tracker-goes-here");
        mytable.style.display = 'inline-block';          
      
      var newTableObject2 = document.getElementById('trackerTable');
      sorttable.makeSortable(newTableObject2);
    }
    </script>
    <script>
    var original_question_order = [];
    function startTracker(first_tracker_data){
        
        console.log('in startTracker function'); 
        mytable = $('<table></table>').attr({ id: "trackerTable" }).attr({class: 'tg center table-goes-here fancyTable'});
        var rows = first_tracker_data.tracker.length;
        console.log (rows);
        var cols =  Object.keys(first_tracker_data.tracker[0]).length;
        var cols_names = Object.keys(first_tracker_data.tracker[0]);
        var header_row = $('<tr></tr>').appendTo(mytable);
        header_row.append("<th>" + "</th>");
        for (var h = 0; h < cols; h++) {
            var header_name = cols_names[h];
            if (h < 12) {header_name = cols_names[h].slice(4)};
            console.log(header_name);
            $('<th></th>').text(header_name).appendTo(header_row);}

        for (var i = 0; i < rows; i++) {
            var row = $('<tr></tr>').appendTo(mytable);
            var cols_names = Object.keys(first_tracker_data.tracker[i]);
            var check_label = first_tracker_data.tracker[i][cols_names[0]];

            row.append('<td><input type="checkbox" name = "tcheck" value="' + check_label + '" id="'+check_label+'"></td>').attr({id:'rtable-' + check_label});//attr({id:'ztable-' + (i+1) + '-0'});
            original_question_order[i] = check_label;
            for (var j = 0; j < cols; j++) {
                $('<td></td>').text(first_tracker_data.tracker[i][cols_names[j]]).attr({id:'ttable-'+ (i+1) + "-" + (j+1)}).appendTo(row); 
            }
                     
        }
        
        mytable.appendTo("#tracker-goes-here");
        document.getElementById('tabs-1').style.display = 'inline-block';          
      
      var newTableObject2 = document.getElementById('trackerTable');
      sorttable.makeSortable(newTableObject2);

      // $('#trackerTable').fixedHeaderTable({
      //   // altClass: 'odd',
      //   footer: false,
      //   fixedColumns: 2,
      //   width: '600',
      //   height: '500',
      //   // width: 400,
      //   });
    }
    </script>
    
    <script>
    window.images = [];
    console.log('images', images) //Array()
    function makeRunReport(tracker_data, images){
        var num_runs = tracker_data.run_reports.length; // number of reports
        console.log('images', images);
        for (var h = 0; h < num_runs; h++) {
            var num_tabs = $("div#tabs ul li").length + 1,
                new_placeholder_id = '#run-report-goes-here-' + num_tabs;
                new_run_report_id = 'run-report-' + num_tabs;
            addNewTab(tracker_data,h);
            console.log('in makeRunReport function'); 

            // update run_scorecard
            var num_segments = document.getElementById('run-scoreboard-segments-' + num_tabs);
            var num_variables = document.getElementById('run-scoreboard-variables-' + num_tabs);
            var seg_coh = document.getElementById('run-scoreboard-cohesiveness-' + num_tabs);
            var seg_diff = document.getElementById('run-scoreboard-diff-' + num_tabs);
            var run_mle = document.getElementById('run-scoreboard-mle-' + num_tabs);
            var run_chisq = document.getElementById('run-scoreboard-chisq-' + num_tabs);
            var run_bic = document.getElementById('run-scoreboard-bic-' + num_tabs);
            var run_method = document.getElementById('run-scoreboard-method-' + num_tabs);
            var run_datetime = document.getElementById('run-datetime-' + num_tabs);
            var run_timestamp = document.getElementById('run-scoreboard-timestamp-' + num_tabs);

            num_segments.innerHTML = tracker_data.run_scorecard[h].b;
            num_variables.innerHTML = tracker_data.run_scorecard[h].c;
            seg_coh.innerHTML = tracker_data.run_scorecard[h].g;
            seg_diff.innerHTML = tracker_data.run_scorecard[h].h;
            run_mle.innerHTML = tracker_data.run_scorecard[h].d;
            run_chisq.innerHTML = tracker_data.run_scorecard[h].e;
            run_bic.innerHTML = tracker_data.run_scorecard[h].f;
            run_method.innerHTML = tracker_data.run_scorecard[h].i;
            run_datetime.innerHTML = tracker_data.run_scorecard[h].j;
            run_timestamp.innerHTML = tracker_data.run_scorecard[h].a;

            //var run_rfe = $('#run-scoreboard-'+ num_tabs + ' > tbody:last-child');
            var run_rfe_length = $('#run-scoreboard-2 tr').length;
            var num_rfe_vars = tracker_data.feature_importance[h].length;
            
            for (var i = 0; i < num_rfe_vars; i++) {
                var row = $('<tr></tr>');
                $('<td></td>').text(tracker_data.feature_importance[h][i][0]).appendTo(row);
                $('<td></td>').text(tracker_data.feature_importance[h][i][1]).appendTo(row); 
                var run_rfe_length = $('#run-scoreboard-' + num_tabs + ' tr').length;
                var insert_point = $('#run-scoreboard-' + num_tabs + ' tr').eq(run_rfe_length-2);
                insert_point.after(row);
            }; //


            mytable = $('<table></table>').attr({ id: 'run-report-' + num_tabs }).attr({class: 'tg center table-goes-here fancyTable'});
            // var num_runs = tracker_data.run_reports.length; // number of reports
            var num_rows =  tracker_data.run_reports[h].length; // length of 1 report
            var num_cols = Object.keys(tracker_data.run_reports[h][0]).length; // cols in 1 report
            console.log (num_runs, num_rows, num_cols);
        
            for (var i = 0; i < num_rows; i++) {
                var row = $('<tr></tr>').appendTo(mytable);
                    for (var j = 0; j < num_cols; j++) {
                        $('<td></td>').text(tracker_data.run_reports[h][i][j]).appendTo(row); 
                    } // inner loop (=j)
                } // outer loop (=i)
                mytable.appendTo(new_placeholder_id);
           
        // mytable.appendTo("#run-report-goes-here");  
        // mytable.appendTo(new_placeholder_id);
    
        // conditional formating
        // http://stackoverflow.com/questions/5066882/conditional-formatting-of-html-table-cells
        // http://docs.joomlabamboo.com/getting-started/how-to-use-the-computed-panel-in-the-chrome-inspector
        // https://api.jquery.com/gt-selector/
        // http://stackoverflow.com/questions/17155734/css-selector-for-all-table-columns-greater-than-nth-of-type2
        $(function() {
        var headerskipper = $("#run-report-" + num_tabs).find("tr:first td").length;
        var table_cells = $("#run-report-" + num_tabs + " tr td:nth-child(3) ~ td").slice((headerskipper - 3) * 7);
        //table_cells = table_cells.slice(headerskipper);
        //console.log(headerskipper, 'table_cells conditional formatting:', table_cells);
        //var table_cells = $("#run-report-" + num_tabs + " td:gt(" + headerskipper + ")");
        table_cells.each(function(index) { // td:gt(96) excudes first 96 <td> (=top header)  
            //var scale = [['vPoor', 10], ['poor', 50], ['avg', 250], ['good', 1250], ['vGood', 6250]];
            var scale = [['ok',100],['good', 140],['great',200]];
            //console.log('scale length:', scale.length)
            var score = $(this).text();
            for (var i = 0; i < scale.length; i++) {
                if (score >= scale[i][1]) {
                    $(this).addClass(scale[i][0]);
                    var prior_sib_location =  2 + ((num_cols - 5)/2);
                    var prior_sib = table_cells[index-prior_sib_location];
                    prior_sib.className = scale[i][0]; 
                    }   
                }
            });
        }); // end of conditional formatting function
        $("#spinner-" + num_tabs).spinner();
        $("#spinner-" + num_tabs).spinner("value", 140);
        $('#spinner-' + num_tabs).on("spinstop", function(){
            var spinvalue = $(this).spinner('value');
            var new_t_num2 = this.id.slice(8);
            console.log(new_t_num2);
               
                $(function() {
                var headerskipper = $("#run-report-" + new_t_num2).find("tr:first td").length;
                var table_cells = $("#run-report-" + new_t_num2 + " tr td:nth-child(3) ~ td").slice((headerskipper - 3) * 7);
                //table_cells = table_cells.slice(headerskipper);
                //var table_cells = $("#run-report-" + new_t_num2 + " td:gt(" + headerskipper + ")");
                // $('#run-report-goes-here-2 tr td:nth-child(3) ~ td')
                table_cells.each(function(index) { // td:gt(96) excudes first 96 <td> (=top header)  
                    //var scale = [['vPoor', 10], ['poor', 50], ['avg', 250], ['good', 1250], ['vGood', 6250]];
                    var scale = [['ok',100],['good', spinvalue],['great',200]];
                    var score = $(this).text();

                    for (var i = 0; i < scale.length; i++) {
                        $(this).removeClass(scale[i][0]);

                        if (score >= scale[i][1]) {
                            $(this).addClass(scale[i][0]);
                            var prior_sib_location = 2 + ((num_cols - 5)/2);
                            var prior_sib = table_cells[index - prior_sib_location];
                            prior_sib.className = scale[i][0];
                            }
                        }
                    });
                }); // end of conditional formatting function tracker_data.run_scorecard[h].b
        });
        $("#seg-spinner-" + num_tabs).spinner({min: 0, max:tracker_data.run_scorecard[h].b});
        $("#seg-spinner-" + num_tabs).spinner("value", 0);
        var timestamp = tracker_data.run_scorecard[h].a;
        console.log('timestamp for tab ', num_tabs, 'is', timestamp, 'h=', h);

        if (visual_flag == true) {
            console.log('visual_mode == true, getting graphs');
            https://perishablepress.com/3-ways-preload-images-css-javascript-ajax/
            http://stackoverflow.com/questions/24822631/object-htmlimageelement-showing-instead-of-image
            window.images[num_tabs] = [];
            for (i = 0; i < tracker_data.run_scorecard[h].b + 1; i++) {
                window.images[num_tabs][i] = new Image();
                window.images[num_tabs][i].src = 'static/plots/seg_graph_' + tracker_data.run_scorecard[h].a + '_' + i + '.png'
            };
            };


        $('#seg-spinner-' + num_tabs).on("spinstop", function(tracker_data,h,images){
            console.log($(this).spinner('value'));
            console.log('spinner id: ',this.id);
            var new_t_num = this.id.slice(12);
            //console.log('new_t_num:', new_t_num);
            //console.log(timestamp);
            var seg_clicked = $(this).spinner('value');
            var seg_plot = document.getElementById('seg-plot-' + new_t_num);
            //var seg_plot = document.getElementById('seg-plot-' + num_tabs);
            console.log('seg_plot:', seg_plot);
            // seg_plot.innerHTML = window.images[num_tabs][seg_clicked].outerHTML;
            seg_plot.innerHTML = window.images[new_t_num][seg_clicked].outerHTML;//<-3/11/2016
            //console.log(seg_plot);


            });// end of seg-spinner action         
        } // outer outer loop (=h) 
    };

    </script>  
<script>
https://perishablepress.com/3-ways-preload-images-css-javascript-ajax/
http://stackoverflow.com/questions/24822631/object-htmlimageelement-showing-instead-of-image
function loadGraphImages (){
    console.log('in loadGraphImages function');
    console.log('tracker_data:', window.tracker_data);
    var num_tabs = $("div#tabs ul li").length;
    var runs = tracker_data.run_reports;
    var num_runs = runs.length;
    var num_new_tabs = num_tabs - num_runs;
    console.log('total num_tabs:', num_tabs);
    console.log('number of runs in this update:',num_runs);
    console.log('number of first new tab:', num_new_tabs);
    
    loop_counter = -1;
    for (h = num_new_tabs; h < num_tabs; h++){
        window.images[h] = [];
        loop_counter += 1
        console.log('loop_counter', loop_counter);
        for (i = 0; i < window.tracker_data.run_scorecard[loop_counter].b + 1; i++) {
            window.images[h][i] = new Image();
            window.images[h][i].src = 'static/plots/seg_graph_' + window.tracker_data.run_scorecard[loop_counter].a + '_' + i + '.png'
        };
    };
};

function loadGraphImages2 (timestamp, segments){
    console.log('in loadGraphImages2 function');
    console.log('timestamp:', timestamp);
    console.log('segments:', segments);
    new_tab = window.images.length; 
    console.log('adding array ', new_tab, 'to windows.images');
        window.images[new_tab] = [];
        for (i = 0; i < segments + 1; i++) {
            window.images[new_tab][i] = new Image();
            window.images[new_tab][i].src = 'static/plots/seg_graph_' + timestamp + '_' + i + '.png'
        };
    };   
</script>
    <!--     check box event handler -->
    <!-- append explorer data to div = "explorer-left" -->
    // <script>
    // http://stackoverflow.com/questions/14004117/create-div-and-append-div-dynamically
    function fillExplorer(first_tracker_data){
        // var num_questions = first_tracker_data.tracker.length;
        var num_questions = 10;
        
        // remove any prior questions in box, reset objective_function dict and and dropdown menu
        var right_div = document.getElementById('explorer-left');
        var objective_function_dropdown = document.getElementById('objective-function-dropdown');
        window.objective_functions = {};
        while (right_div.childElementCount > 1) { right_div.removeChild(right_div.lastChild);};
        while (objective_function_dropdown.childElementCount > 0) { objective_function_dropdown.removeChild(objective_function_dropdown.lastChild);};

        for (i = 0; i < num_questions; i++) {
            var cols_names = Object.keys(first_tracker_data.tracker[i]);
            var question_name = first_tracker_data.tracker[i][cols_names[0]];
            //console.log(question_name);
            var innerDiv = document.createElement('div');
            innerDiv.textContent = question_name; 
            innerDiv.id = question_name;
            right_div.appendChild(innerDiv);
        }

    };
    </script>

<script src='static/js/dragula.min.js'></script>
<!-- <script src='static/js/example.min.js'></script> -->

<script>
var dragAndDrop = {
    limit: 10,
    count: 0,
    
    init: function () {
        this.dragula();
        this.eventListeners();
    },
    eventListeners: function () {
        this.dragula.on('drop', this.dropped.bind(this));
    },
    dragula: function () {
        this.dragula = dragula([document.querySelector('#explorer-left'), document.querySelector('#explorer-right')],
        {
            moves: this.canMove.bind(this),
            copy: true,
        });
    },
    canMove: function () {
        return this.count < this.limit;
    },
    dropped: function (el) {
        this.count++;
    }
};
dragAndDrop.init();
</script>
<!-- Upload file -->
<script>
// http://stackoverflow.com/questions/18334717/how-to-upload-a-file-using-an-ajax-call-in-flask
// https://github.com/moremorefor/flask-fileupload-ajax-example/blob/master/app.py
$(function() {
    $('#upload-file-btn').click(function() {
        var form_data = new FormData($('#upload-file')[0]);
        if( document.getElementById('upload-field-2').value.length > 0 ) { // empty field test
        $("#myModal").modal("toggle");
        myApp.showPleaseWait();
        console.log('form data: ', form_data.files); 
        $.ajax({
            type: 'POST',
            url: '/upload',
            data: form_data,
            contentType: false,
            cache: false,
            processData: false,
            async: true ,
            success: function(data) {
                console.log('Success!');
                console.log('Data:', data);
                myApp.hidePleaseWait();
                clearTabs ();
                console.log('tabs cleared');
                StartTrackerData ();
            },
        });
    } else {return}
    });
});

$(function() {
    $('#upload-file-btn-2').click(function() {
        var form_data_2 = new FormData($('#upload-file-2')[0]);
        var form_data_3 = new FormData($('#upload-file-3')[0]);
        window.session_id = UUID();
        console.log('session_id: ', window.session_id);
        document.cookie ='session_id=' + window.session_id + '; expires=Fri, 31 Dec 2016 20:47:11 UTC; path=/'
        //var form_data_all = [form_data_2, form_data_3];
        if( document.getElementById('upload-field-3').value.length > 0 && document.getElementById('upload-field-4').value.length > 0) { // empty field test
        $('#upload-field-3').val(''); // reset weights_filename
        $('#upload-field-4').val(''); // reset data_filename
        $("#myModal4").modal("toggle");
        //myApp.showPleaseWait();
        console.log('form data 2 (weights): ', form_data_2); 
        console.log('form data 3 (data): ', form_data_3); 
        console.log('form data 2 (weights): ', form_data_2.files); 
        console.log('form data 3 (data): ', form_data_3.files); 
        $.ajax({
            type: 'POST',
            url: '/upload_2',
            data: form_data_2,
            contentType: false,
            cache: false,
            processData: false,
            async: true ,
            success: function(data) {
                console.log('Success 1!');
                console.log('Data:', data);
                //myApp.hidePleaseWait();
                //clearTabs ();
                //console.log('tabs cleared');
                //StartTrackerData ();
            },
        });

        $.ajax({
            type: 'POST',
            url: '/upload_3',
            data: form_data_3,
            contentType: false,
            cache: false,
            processData: false,
            async: true ,
            success: function(data) {
                console.log('Success 2!');
                console.log('Data:', data);
                myApp.hidePleaseWait();
                clearTabs ();
                console.log('tabs cleared');
                StartTrackerData ();
            },
        });

    } else {return}
    });
});
</script>
<script>
function clearTabs() {
    // clear run_tracker
    var elem = document.getElementById('trackerTable');
    if (elem != null)
        {elem.parentNode.removeChild(elem);
    // clear run_reports
    var tab_labels = document.getElementById('tab-list').children,
        tab_fields = document.getElementById('tabs').children,
        tab_labels_length = tab_labels.length,
        tab_fields_length = tab_fields.length;

        // remove all tab_labels except tab_label[0]
            console.log('tab_labels length (i):', tab_labels_length);
        console.log('tab_fields length (j):', tab_fields_length);
        
        for (i = 1; i < tab_labels_length; i++) {
            console.log('i:', i);
            tab_labels[1].parentNode.removeChild(tab_labels[1]);
        }
        // remove all tab_fields except tab_field[0], tab_field[1]
        for (j = 2; j < tab_fields_length; j++) {
            console.log('j:', j);
            tab_fields[2].parentNode.removeChild(tab_fields[2]);
        }
    }
    else
        {return}
};
</script>

<script>
// http://www.redips.net/javascript/adding-table-rows-and-columns/
// append row to the HTML table
function appendRow() {
    var tbl = document.getElementById('my-table'), // table reference
        row = tbl.insertRow(tbl.rows.length),      // append table row
        i;
    // insert table cells to the new row
    for (i = 0; i < tbl.rows[0].cells.length; i++) {
        createCell(row.insertCell(i), i, 'row');
    }
}
 
// create DIV element and append to the table cell
function createCell(cell, text, i, style) {
    console.log(cell, text, i, style);
    var div = document.createElement('div'), // create DIV element
        txt = document.createTextNode(text), // create text node
        col = document.getElementById('trackerTable').rows[0].cells.length;
    console.log(col);
    div.appendChild(txt);                    // append text node to the DIV
    div.setAttribute('class', style);        // set DIV class attribute
    div.setAttribute('className', style);    // set DIV class attribute for IE (?!)
    cell.setAttribute('id', 'ttable-'+ (i) + "-" + (col));  // set id for new cell
    cell.appendChild(div);                   // append DIV to the table cell
    // console.log(cell);
}
// append column to the HTML table
// http://stackoverflow.com/questions/1793046/is-it-possible-to-create-a-th-with-tablerow-insertcell
// http://stackoverflow.com/questions/14999927/insert-th-in-thead
// http://stackoverflow.com/questions/10043760/javascript-count-number-of-columns-in-a-table-row
function appendColumn(tracker_data) {
    console.log('in appendColumn function');
    var tbl = document.getElementById('trackerTable'), // table reference
        row_list = tbl.getElementsByTagName('tr'), // new method?
        one_row = row_list[1],
        current_question_order = [],
        i;

    console.log('document.getElementByTagName:', row_list.length);

    for (var z = 1; z < row_list.length; z++) {//old: row_list.length-1
    // console.log('id',row_list[z].id.slice(7));
    current_question_order[z] = row_list[z].id.slice(7);
    };

    console.log('row_list_id: ', current_question_order.length, current_question_order);

    
    // open loop for each row and append cell
    var num_new_cols =  Object.keys(tracker_data.tracker[0]).length;
    var keys = Object.keys(tracker_data.tracker[0]);
    var col_num = tbl.rows[0].cells.length;

    for (j = 0; j < num_new_cols; j++) {

        for (i = 0; i < tbl.rows.length - 1; i++) {
            console.log(tbl.rows.length);   
            if (i == 0) {console.log('header_row');

            var txt = tracker_data.tracker[i][keys[j]]; 
            console.log(i,j,keys,txt)
            var x = tbl.rows[i].insertCell(-1);
            // var col_num = tbl.rows[0].cells.length;
            x.outerHTML = ('<th id="ttable-'+ i + '-' + col_num + '">' + keys[j] + '</th>');
            
            }

            var old_to_new_mapping = current_question_order.indexOf(original_question_order[i]);

            var txt = tracker_data.tracker[i][keys[j]];

            var x = tbl.rows[old_to_new_mapping].insertCell(-1); // use when sortTable = true

            x.innerHTML = txt;
            x.setAttribute('id', 'ttable-'+ (i+1) + "-" + (col_num-1));

        } // inner loop (= i)
    } // outer loop (= j)

  var newTableObject2 = document.getElementById('trackerTable');
  sorttable.makeSortable(newTableObject2);

  // $('#trackerTable').fixedHeaderTable({
  //   // altClass: 'odd',
  //   footer: false,
  //   fixedColumns: 2,
  //   height: 500,
  //   });
}; 
</script>
<script>
// http://stackoverflow.com/questions/27629122/how-to-get-all-ids-inside-of-a-div-using-pure-javascript
var objective_functions = {};
function getExplorerIds () {
    console.log('in getExplorerIds function')
    var explorer_left_ids = [];
    var explorer_right_ids = [];
    var explorer_left_children = document.getElementById("explorer-left").children;
    var explorer_right_children = document.getElementById("explorer-right").children;
    var objective_function_name = document.getElementById("objective-function-field").value;

    // test for null values
    if (explorer_right_children.length < 3) {console.log('no vars selected'); return};
    if (objective_function_name == '') {objective_function_name = 'objective_function_' + Object.keys(objective_functions).length};
    console.log(objective_function_name);
    for (var i = 0, len = explorer_left_children.length ; i < len; i++) {
        explorer_left_ids.push(explorer_left_children[i].id);
    }
    for (var i = 0, len = explorer_right_children.length ; i < len; i++) {
        explorer_right_ids.push(explorer_right_children[i].id);
    }
    //console.log(explorer_left_ids, explorer_right_ids);
    console.log(objective_function_name);
    objective_functions[objective_function_name] = explorer_right_ids.slice(2);
    console.log(Object.keys(objective_functions));
    //return objective_function_name + explorer_right_ids.slice(1)
    // return objective_functions[objective_function_name];

    var select = document.getElementById("objective-function-dropdown"); 
    var options = Object.keys(objective_functions); // ["1", "2", "3", "4", "5"]; 
    console.log(options);
    while (select.firstChild) { select.removeChild(select.firstChild);} // clear dropdown menu
    //select.parentNode.removeChild(select); // clear menu

    // http://stackoverflow.com/questions/4772774/how-do-i-create-a-link-using-javascript
    for(var i = 0; i < options.length; i++) {
        var opt = options[i];
        var el = document.createElement("li");
        var link = document.createElement("a");
        link.innerHTML = opt;
        link.href ='#!'
        el.appendChild(link)
        select.appendChild(el);
    };
    // clear input box
    var objective_function_field = document.getElementById("objective-function-field");
    objective_function_field.value = "";

    // clear right box
    var right_box = document.getElementById('explorer-right');
    while (right_box.childElementCount > 2) { right_box.removeChild(right_box.lastChild);}
    // update server db
    SubmitObjectiveFunction (objective_functions); 
    
    // update tracker_table with new objective_function_name
    var tr = document.getElementById('trackerTable').getElementsByTagName('tr');
    for (var i = 0; i < tr.length; i++) {
    var row_name = tr[i].id.slice(7);
    if (objective_functions[objective_function_name].includes(row_name))
        {console.log('row matched', row_name);
        tr[i].children[3].innerHTML = objective_function_name; 
    }
};
};

</script>
<script>
// http://stackoverflow.com/questions/30181219/jquery-ui-rename-sortable-tabs-on-double-click
// http://jsfiddle.net/gabs6hdq/
$(function() {
    var tabs = $('#tabs').tabs();
    tabs.find( ".ui-tabs-nav" ).sortable({
           axis: "x",
           stop: function() {
              tabs.tabs( "refresh" );
          },
          select: function(event, ui) {
              alert("PRESSED TAB!");
          }
     });
     $('#tab-list').on('dblclick','li', function(){
        console.log('tab double clicked!'); 
         $(this).find('input').toggle().val($(this).find('a').html()).focus();
         $(this).find('a').toggle();
     });
    
    $('#tab-list').on('keydown blur dblclick','li input',function(e){
        if(e.type=="keydown")
        {
           if(e.which==13) // 13=enter
           {
               $(this).toggle();
               $(this).siblings('a').toggle().html($(this).val());
           }
           if(e.which==38 || e.which==40 || e.which==37 || e.which==39 || e.keyCode == 32) // 32=space;37,38,39,40 = arrows 
           {
               e.stopPropagation();
           }
  
        }
        else if(e.type=="focusout")
        {
            if($(this).css('display')=="inline-block")
            {
                $(this).toggle();
                $(this).siblings('a').toggle().html($(this).val());
            }
        }
        else
        {
            e.stopPropagation();
        }
    });
});
$(document).ready(function() {
    
});
</script>
<script>
//https://gist.github.com/duzun/d1bfb5406a362e06eccd
function UUID() {
    function s(n) { return h((Math.random() * (1<<(n<<2)))^Date.now()).slice(-n); }
    function h(n) { return (n|0).toString(16); }
    return  [
        s(4) + s(4), s(4),
        '4' + s(3),                    // UUID version 4
        h(8|(Math.random()*4)) + s(3), // {8|9|A|B}xxx
        // s(4) + s(4) + s(4),
        Date.now().toString(16).slice(-10) + s(2) // Use timestamp to avoid collisions
    ].join('-');
}
// http://stackoverflow.com/questions/7616461/generate-a-hash-from-string-in-javascript-jquery
hashCode = function(s){
  return s.split("").reduce(function(a,b){a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);              
}
</script>
<script>
var num_segments = [],
    xls_out =[],
    grid_search = [],
    method = [];
// Dropdown: number of segments
// http://stackoverflow.com/questions/24620741/get-selected-item-value-from-bootstrap-dropdown-with-specific-id    
$('#dropdown-menu-1a li a').on('click', function(){
    num_segments = $(this).text();
    console.log(num_segments);
    $('#dropdownMenu1-label-2a').text('Seg: ' + num_segments + ' ');
    // $('#dropdownMenu1-label-2a').text('<span class="caret"><span>');
    var newSpan = document.createElement('span');
    newSpan.className = 'caret';
    $('#dropdownMenu1-label-2a').append(newSpan);
    // var x = document.getElementById('number-of-segments');
    // x.innerHTML('this is a test');
});
// Dropdown: segmentation method    
$('#dropdown-menu-2 li a').on('click', function(){
    console.log('dropdown clicked');
    method = $(this).text();
    console.log(method);

});
// cluster_seed_button
// http://stackoverflow.com/questions/4177159/toggle-checkboxes-on-off   
$('#cluster-seed-button').on('click', function(){
    console.log('cluster_seed button clicked', cluster_seed);
    for(var i = 0; i < cluster_seed.length; i++) {
        console.log('now checking checkbox:', cluster_seed[i]);
        var one_checkbox = $('#' + cluster_seed[i]);
        console.log(one_checkbox);
        //one_checkbox.prop("checked", true);
        one_checkbox.trigger('click');
    };
});
// compare-runs-button-A and B
$('#compare-run-button').on('click', function(){
    console.log('in compare-run-dropdown function');

    $('#myModal5').modal('toggle');
    //$('myModal5').toggle();
    var select = document.getElementById("dropdown-menu-4"); 
    var select_2 = document.getElementById("dropdown-menu-4a"); 
    var options = $('#tab-list').children().length; //["1", "2", "3", "4", "5"]; 

    console.log(options);
    while (select.firstChild) { select.removeChild(select.firstChild);} // clear menu
    while (select_2.firstChild) { select_2.removeChild(select_2.firstChild);} 
    //select.parentNode.removeChild(select); // clear menu

    // http://stackoverflow.com/questions/4772774/how-do-i-create-a-link-using-javascript
    //for(var i = 0; i < options.length; i++) {
    for(var i = 1; i < options; i++) {
        var opt = i;
        var el = document.createElement("li");
        var link = document.createElement("a");
        link.innerHTML = "Run #" + opt;
        link.href ='#!'
        el.appendChild(link)
        select.appendChild(el);
    };

        for(var i = 1; i < options; i++) {
        var opt = i;
        var el = document.createElement("li");
        var link = document.createElement("a");
        link.innerHTML = "Run #" + opt;
        link.href ='#!'
        el.appendChild(link)
        select_2.appendChild(el);
    };
});

// compare-runs-dropdown-chosen-A
$('#dropdown-menu-4').on('click', 'li a', function(){
    chosen_run_1 = $(this).text();
    console.log(chosen_run_1);
    z = document.getElementById('dropdownMenu1-label-4');
    z.innerHTML = chosen_run_1;
});
// compare-runs-dropdown-chosen-B
$('#dropdown-menu-4a').on('click', 'li a', function(){
    chosen_run_2 = $(this).text();
    console.log(chosen_run_2);
    z = document.getElementById('dropdownMenu1-label-4a');
    z.innerHTML = chosen_run_2;
});

$('#compare-run-button-2').on('click', function(){
    console.log('in compare-run-2 button clicked');
    r1 = Number(document.getElementById('dropdownMenu1-label-4').innerHTML.slice(5)) + 1;
    //r1_length = r1.length;
    r2 = Number(document.getElementById('dropdownMenu1-label-4a').innerHTML.slice(5)) + 1;
    //r2_length = r2.length;
    console.log(r1, r2);
    var r1_table = $('#run-report-' + r1).clone()
    r1_table.attr({class: 'run-report left-column'});
    //r1_table.attr({float: 'left'});
    var r2_table = $('#run-report-' + r2).clone();
    r2_table.attr({class: 'run-report right-column'});
    //r2_table.attr({float: 'right'});
    //style="float: left;">
    //var r3_table = $('.left-column,.right-column').wrap('<td></td>').parent().wrapAll('<table><tbody><tr></tr></tbody></table>');
    //$('#run-a-goes-here').append(r1_table);
    //$('#run-b-goes-here').append(r2_table);

    $('#run-a-goes-here').html('<table border=1 class="run-report" id = "compare-table"><tr><td id="cell1"></td><td id="cell2"></td></tr></table>');
    $('#cell1').append(r1_table);
    $('#cell2').append(r2_table);
    //$('#run-a-goes-here').append(r3_table);
});

function cleanUpComparison(){
    console.log('in cleanUpComparison function');
    $('#dropdownMenu1-label-4')[0].innerHTML = "Run 'A'";
    $('#dropdownMenu1-label-4a')[0].innerHTML = "Run 'B'";
    $('#compare-table').hide();
    // $('#run-b-goes-here').hide();
};

function LoginLogout(){
    console.log('in LoginLogout function');
    var login_text = $('#login-text')[0].innerHTML;
    if (login_text.indexOf('Login') != -1) { 
        var user_email = readCookie('user_email');
        if (user_email != null) { $('#user-id').val(user_email);}// if ($('#login-check').prop('checked') == false) {//$(this).trigger('click')}};
        $('#myModal3').modal('toggle');}
    else {
        $('#login-text')[0].innerHTML = '<span class="glyphicon glyphicon-lock" href="#!" bgcolor="red" style="color:#B80000" id="login-lock"></span>Login';
        $('.login-hide').toggle();
        $('#basic-toolbar').toggle();
        $('body').css('overflow', 'hidden');
    };
};
// store user_id?
$('#login-check').on('change', function(){
    console.log('login-check function');
    if ($(this).prop('checked')) {
        console.log('user_id box checked'); 
        user_id = $('#user-id').val();
        createCookie('user_email', user_id, 7); // (cookie name, value, days untill expire) 
        //document.cookie = 'user_email=' + user_id + '; expires=Fri, 31 Dec 2016 20:47:11 UTC; path=/'
        console.log(document.cookie);
    }
        else
            {console.log('user_id box unchecked');
             eraseCookie('user_email');
             //document.cookie ='user_email=' + null;
             //'user_email=''; expires=Fri, 31 Dec 2016 20:47:11 UTC; path=/'}
             console.log(document.cookie);
    }
});

function cleanUpLogin(){
    console.log('in cleanUpLogin function');
    $('#password').val(''); // reset password input field
    $('#user-id').val('');  // reset user id input field
    //if ($('#login-check').prop('checked')) {$(this).trigger('click')} // reset user_id checkbox if checked
};
// login button :-)
$('#login').on('click', function(){
    console.log('login button pressed');
    password = $('#password').val();
    user_id = $('#user-id').val();
    console.log('password:', password);
    if (password == 'r0sett@' && user_id != 0) {
        //$('#login-lock')[0].style.color = '#00FF66';
        $('#login-text')[0].innerHTML = '<span class="glyphicon glyphicon-lock" href="#!" bgcolor="red" style="color:#00FF66" id="login-lock"></span>Logout'
        window.session_id = UUID();
        document.cookie = 'session_id=' + window.session_id + '; expires=Fri, 31 Dec 2016 20:47:11 UTC; path=/';
        if ($('#login-check').prop('checked')) { createCookie('user_email', user_id, 7); console.log(document.cookie)}
        window.user_id = hashCode(user_id).toString();
        $('.login-hide').toggle();
        $('body').css('overflow', 'auto');
        // http://stackoverflow.com/questions/9538868/prevent-body-from-scrolling-when-a-modal-is-opened
        console.log('session_id:', window.session_id);
        console.log('user_id:', window.user_id);
        //SubmitSessionId (window.session_id);
        clearTabs();
        StartTrackerData ();
        $('#basic-toolbar').toggle();
        $('#password').val(''); // reset password input field
        $('#user-id').val(''); // reset user id input field
        $("#myModal3").modal("toggle"); // close modal
    };
});
    
// triggers login 'click' if enter pressed in password field
$('#password').on('keydown',function(e){
       if(e.which==13) { // 13=enter}
        $('#login').trigger('click')}
});


// Dropdown: objective function chooser  
// http://codepedia.info/2015/02/click-event-for-dynamic-button-jquery/  
$('#objective-function-dropdown').on('click', 'li a', function(){
    var chosen_objective_function = $(this).text();
    console.log('click!', chosen_objective_function);
    console.log(objective_functions[chosen_objective_function].length);    
    // now use chosen_objective_function to repopulate right_container
    var right_box = document.getElementById('explorer-right');
    console.log(right_box);
     
    // clear right_box
    while (right_box.childElementCount > 2) { right_box.removeChild(right_box.lastChild);}
    
    // repopulate with chosen objective function vars
    field_name = document.getElementById('objective-function-field');
    field_name.value = chosen_objective_function;
    var new_vars = objective_functions[chosen_objective_function];
    for(var i = 0; i < new_vars.length; i++) {

        var question_name = new_vars[i]
        console.log(question_name);
        var innerDiv = document.createElement('div');
        innerDiv.textContent = question_name; 
        innerDiv.id = question_name;
        right_box.appendChild(innerDiv);
    };
});

// Button: Gridsearch?   
var grid_search = $('#grid-on-off').text();
$('#grid-button').on('click', function(){    
    // $('#grid-on-off').text('on');
    // if (grid_search == 'off') {$('#grid-on-off').text('on'), grid_search = 'on', $('#grid-button')[0].style.backgroundColor = 'green'}
    // else {$('#grid-on-off').text('off'), grid_search = 'off', $('#grid-button')[0].style.backgroundColor = 'red';}
    if (grid_search == 'off') {grid_search = 'on', $('#grid-button')[0].style.backgroundColor = 'green'}
    else {grid_search = 'off', $('#grid-button')[0].style.backgroundColor = 'red';}
    console.log('grid_search:', grid_search);
});

// Button: Excel export?
var xls_out = $('#excel-on-off').text();    
$('#excel-button').on('click', function(){
    // var xls_out = $('#excel-on-off').text();
    if (xls_out == 'off') {$('#excel-on-off').text('on'), xls_out = 'on';}
    else {$('#excel-on-off').text('off'), xls_out = 'off';};
    console.log('xls_out:', xls_out);

});
// http://stackoverflow.com/questions/5670769/jquery-detecting-if-a-file-has-been-selected-in-the-file-input
$('#file-search-2').on('change', function(){
    var upfile_name = document.getElementById('file-search-2').value.slice(12);
    var upload_field = document.getElementById('upload-field-2');
    upload_field.value = upfile_name;
    console.log(upfile_name, upload_field.value);
});

$('#file-search-3').on('change', function(){
    var upfile_name_2 = document.getElementById('file-search-3').value.slice(12);
    var upload_field_2 = document.getElementById('upload-field-3');
    upload_field_2.value = upfile_name_2;
    console.log(upfile_name_2, upload_field_2.value);
});

$('#file-search-4').on('change', function(){
    var upfile_name_3 = document.getElementById('file-search-4').value.slice(12);
    var upload_field_3 = document.getElementById('upload-field-4');
    upload_field_3.value = upfile_name_3;
    console.log(upfile_name_3, upload_field_3.value);
});



// objective function dropdown
// remove already chosen vars from dropdown
// 
$('#objective-function-toggle').on('click', function (){
    console.log('in objecive-toggle function');
    console.log('corr_matrix_length:', Object.keys(corr_matrix).length);
    
    var dropdown = document.getElementById("dropdown-menu-3"); 
    for(var i = 0; i < Object.keys(corr_matrix).length; i++) {
        var opt = Object.keys(corr_matrix)[i];
        var el = document.createElement("li");
        var link = document.createElement("a");
        link.innerHTML = opt;
        link.href ='#!'
        //el.style.color = 'black';
        //el.id = 'test-123'
        el.appendChild(link)
        dropdown.appendChild(el);
    };
});

// which variable chosen for objective function anchor? 
$('#dropdown-menu-3').on('click', 'li a', function(){
    chosen_question = $(this).text();
    console.log(chosen_question);
    // $('#create-objective-btn').text('Create Objective Function: ' + chosen_question);
    z = document.getElementById('create-objective-btn');
    z.innerHTML = 'Create Objective Function: ' + chosen_question;
});

$('#create-objective-btn').on('click', function()  {
    var tbl = document.getElementById('trackerTable');
    z = tbl.firstChild.firstChild.childNodes[4]; // select column to insert beore
    
    // update table <th>
    a = document.createElement('th');
    a.innerHTML = 'OF: ' + chosen_question; // TODO: add counter
    z.insertAdjacentElement('beforeBegin',a);
    
    // now update table <tds>
    for(var i = 0; i < Object.keys(corr_matrix).length; i++) {
        row = tbl.childNodes[1].children[i]
        row_name = row.id.slice(7); // find row name
        b = document.createElement('td');
        corr = corr_matrix[chosen_question][row_name] //look up values
        corr = parseFloat(corr).toFixed(3); // round to 3 places
        b.innerHTML = corr; 
        row.childNodes[4].insertAdjacentElement('beforeBegin',b);
    }
    $("#myModal2").modal("toggle"); // close modal
    z = document.getElementById('create-objective-btn');
    z.innerHTML = 'Create Objective Function Anchor' // reset button

    var newTableObject3 = document.getElementById('trackerTable');
    sorttable.makeSortable(newTableObject3);
});
</script>
<!-- <script src="static/js/jquery.js"></script>
<script src="static/js/jquery-ui.js"></script> -->
<script>
$( "#tabs" ).tabs({closable: true});
</script>
<script>
// $(document).ready(function() {
//     console.log('in fixedHeaderTable function');
    //https://github.com/markmalek/Fixed-Header-Table
    // $('#trackerTable').fixedHeaderTable({
    //     altClass: 'odd',
    //     footer: false,
    //     fixedColumns: 2,
    //     height: 150,
    // });
// });
</script>
<!-- add new tabs to run_report -->
<script>
//http://stackoverflow.com/questions/14702631/in-jquery-ui-1-9-how-do-you-create-new-tabs-dynamically
function addNewTab(tracker_data, h) {
    console.log('in addNewTab function');   
    $("div#tabs").tabs();
    var tab_index = $("div#tabs ul li").length;
    var num_tabs = $("div#tabs ul li").length + 1;
    $("div#tabs ul").append(
    "<li class = 'tab'><input style='color:black' class='txt tab-name' type='text'/><a href='#tab" + num_tabs + "'>R" + tab_index + "</a></li>"
    );
    $("div#tabs").append(
    "<div id='tab" + num_tabs + "'></div>"
    );
    $("div#tab" + num_tabs).append(
    "<div class = 'run-report run-scoreboard' id = 'run-scoreboard-" + num_tabs + "'><table id = 'run-scoreboard-"+ num_tabs + "'><tr><td>Run ID</td><td id='run-scoreboard-timestamp-" + num_tabs + "'></td></tr><tr><td>Method</td><td id='run-scoreboard-method-" + num_tabs + "'></td></tr><tr><td>Datetime:</td><td id='run-datetime-" + num_tabs + "'></td></tr><tr><td># segments:</td><td id = 'run-scoreboard-segments-" + num_tabs + "'></td></tr><tr><td># variables</td><td id='run-scoreboard-variables-" + num_tabs + "'></td></tr><tr><td>Seg Coh:</td><td id='run-scoreboard-cohesiveness-" + num_tabs + "'></td></tr><tr><td>Seg Diff:</td><td id='run-scoreboard-diff-" + num_tabs + "'></td></tr><tr><td>MLE:</td><td id='run-scoreboard-mle-" + num_tabs + "'></td></tr><tr><td>Chi-Sq:</td><td id='run-scoreboard-chisq-" + num_tabs + "'></td></tr><tr><td>BIC:</td><td id='run-scoreboard-bic-" + num_tabs + "'></td></tr><tr><td>Heatmap Midpoint</td><td><input id='spinner-" + num_tabs +"'></td></tr><tr><td>View Segment </td><td><input id='seg-spinner-" + num_tabs +"'></td></tr><tr><td rowspan = '2' id = 'seg-plot-" + num_tabs +"'><img src = 'static/base_plot/seg_graph_1c71ff47-960f-4ba7-ba39-f5de0d451145_0.png'></td></tr></table></div>"
    );
    $("div#tab" + num_tabs).append(
    "<div class = 'hidden'></div>"
    ); 
    $("div#tab" + num_tabs).append(
    "<div id='run-report-goes-here-" + num_tabs +"' class = 'center run-report'></div>"
    );  
    $("div#tabs").tabs("refresh");
};
// <tr><td rowspan = '2' id = 'seg-plot-" + num_tabs +"'><img src = 'static/base_plot/seg_graph_1c71ff47-960f-4ba7-ba39-f5de0d451145_0.png'></td></tr>
// " + tracker_data.run_scorecard[h].a + "          
</script>
<!-- Sortable tabs -->
<script>
//https://jqueryui.com/tabs/#Sortable
$(function() {
var tabs = $( "#tabs" ).tabs();
tabs.find( ".ui-tabs-nav" ).sortable({
  axis: "x",
  stop: function() {
    tabs.tabs( "refresh" );
  }
});
});
</script>
<!-- conditional formatting -->
<script>
// http://stackoverflow.com/questions/5066882/conditional-formatting-of-html-table-cells
// $(function() {
//     $('td').each(function(index) {
//         //var scale = [['vPoor', 10], ['poor', 50], ['avg', 250], ['good', 1250], ['vGood', 6250]];
//         var scale = [['good', 50]];
//         var score = $(this).text();
//         for (var i = 0; i < scale.length; i++) {
//             if (score >= scale[i][1]) {
//                 $(this).addClass(scale[i][0]);
//             }
//         }
//     });
// });
</script>

<script>
// http://ssiddique.info/jquery-and-editable-html-table.html
// http://mrbool.com/how-to-create-an-editable-html-table-with-jquery/27425
$(function () {
    $("#tracker-goes-here").on('dblclick', 'tr td:nth-child(4)', function() {
        var OriginalContent = $(this).text();
        console.log('in cell edit function');
        console.log('full row name:', $(this).parent().attr("id"));
        var full_row_name_length = $(this).parent().attr("id").length;
        var row_name = $(this).parent().attr("id").slice(7); // (rtable-) slice includes starting num
        console.log('row name:', row_name);
         
        $(this).addClass("cellEditing");
        $(this).html("<input type='text' value='" + OriginalContent + "' />");
        $(this).children().first().focus();
 
        $(this).children().first().keypress(function (e) {
            if (e.which == 13) {
                var newContent = $(this).val();
                $(this).parent().text(newContent);
                $(this).parent().removeClass("cellEditing");
                console.log('row name:', row_name);
                console.log('content:', newContent);
                var new_dimension = [row_name, newContent];
                SubmitDimension(new_dimension);
            }
        });
         
    $(this).children().first().blur(function(){
        $(this).parent().text(OriginalContent);
        $(this).parent().removeClass("cellEditing");
    });
    });
});
</script>
<script>
// jQuery().ready(function($) {
//     $('#spinner').spinner({ min: -100, max: 100 });
// });
</script>
<script>$("#advanced-toolbar").hide()</script>
<script>
// hide cols of less frequently used info in run_tracker
var hide = $('#hide-col-button').text();
$('#hide-col-button').on('click', function (){
    var hide = $('#hide-col-button').text();
    if (hide == 'Hide Col') {
    console.log('hiding columns');
    for ( var i = 5; i < 14; i++) {
    $("#trackerTable td:nth-child(" + i + "),th:nth-child(" + i + ")").hide();
    };
    // $('#trackerTable td:nth-child(1),th:nth-child(1)').hide()
    // $('#trackerTable td:nth-child(2),th:nth-child(2)').hide(),
    // $('#trackerTable td:nth-child(3),th:nth-child(3)').hide(),
    $('#hide-col-button').text('Show Col');}
    else {
    console.log('showing columns');
    for ( var i = 5; i < 14; i++) {
    $("#trackerTable td:nth-child(" + i + "),th:nth-child(" + i + ")").show();
    };
    // $('#trackerTable td:nth-child(1),th:nth-child(1)').show(),
    // $('#trackerTable td:nth-child(2),th:nth-child(2)').show(),
    // $('#trackerTable td:nth-child(3),th:nth-child(3)').show(),
    $('#hide-col-button').text('Hide Col');}
});
</script>
<script>
function LoadSession(filenames){
    console.log('load session clicked');
    $('#myModal6').modal('toggle');
    var select = document.getElementById("dropdown-menu-5"); 
    var options = filenames['filenames'];
    while (select.firstChild) { select.removeChild(select.firstChild);} // clear menu

    // http://stackoverflow.com/questions/4772774/how-do-i-create-a-link-using-javascript
    //var dropdown = document.getElementById("dropdown-menu-3"); 
    for(var i = 0; i < options.length; i++) {
        var opt = options[i];
        var el = document.createElement("li");
        var link = document.createElement("a");
        link.innerHTML = opt;
        link.href ='#!';
        el.appendChild(link);
        select.appendChild(el);
    };
  };  

// load-session-dropdown-chosen
$('#dropdown-menu-5').on('click', 'li a', function(){
    selected_session = $(this).text();
    console.log(selected_session);
    z = document.getElementById('dropdownMenu1-label-5');
    z.innerHTML = selected_session;
});

// load-session-button clicked
$("#load-session-button").on('click', function(){
    console.log('load session button clicked');
    filename = $('#dropdownMenu1-label-5').text();
    console.log('filename chosen:', filename);
    //http://stackoverflow.com/questions/1789945/how-can-i-check-if-one-string-contains-another-substring
    if (filename.indexOf('Choose Session') == -1) {LoadSessionFile (window.user_id, filename);}
});

function cleanUpSavedSession(){
    console.log('in cleanUpComparison function');
    $('#dropdownMenu1-label-5')[0].innerHTML = "Choose Session";
};
</script>
<script>
function dataWeights(){
        
        console.log('in dataWeights function'); 
        myweighttable = $('<table></table>').attr({ id: "weights-table" }).attr({class: 'tg center table-goes-here fancyTable'});
        var rows = 8;
        console.log (rows);
        var cols =  10;
        var cols_names = ['Data Type', 'Category','Number','Percentage','x','x', 'Data Type', 'Category','Number','Percentage'];
        var row_data  = [['Age','x','x','x','x','x','x','x','x','x'],
                         ['x','x','x','x','x','x','x','x','x','x'],
                         ['x','x','x','x','x','x','x','x','x','x'],
                         ['x','x','x','x','x','x','x','x','x','x'],
                         ['x','x','x','x','x','x','x','x','x','x'],
                         ['Gender','x','x','x','x','x','x','x','x','x'],
                         ['x','x','x','x','x','x','x','x','x','x'],
                         ['x','x','x','x','x','x','x','x','x','x']]
        // var cols_names = ['x','x','x','x','x','x','x','x','x','x','x','x','x','x','x'];
        // var cols_names = ['x','x','x','x','x','x','x','x','x','x','x','x','x','x','x'];
        // var cols_names = ['x','x','x','x','x','x','x','x','x','x','x','x','x','x','x'];
        // var cols_names = ['x','x','x','x','x','x','x','x','x','x','x','x','x','x','x'];
        // var cols_names = ['x','x','x','x','x','x','x','x','x','x','x','x','x','x','x'];
        var header_row = $('<tr></tr>').appendTo(myweighttable);
        // header_row.append("<th>" + "</th>");
        for (var h = 0; h < cols; h++) {
            var header_name = cols_names[h];
            console.log(header_name);
            $('<th></th>').text(header_name).appendTo(header_row);};
        console.log(row_data);
        for (var i = 0; i < rows; i++) {
            var row = $('<tr></tr>').appendTo(myweighttable);
            for (var j = 0; j < cols; j++) {
                var cell_data = row_data[i][j];
                $('<td></td>').text(cell_data).attr({id:'wtable-'+ (i+1) + "-" + (j+1)}).appendTo(row); 
            }                 
        }
    myweighttable.appendTo("#weights-table-goes-here");
    spinner_rows = [1,2,3,4,5,6,7];
    for (var h = 0; h < cols; h++) {
        $('#wtable-' + spinner_rows[h]  + '-5').append("<input id='spinner-weight-" + h +"'>");
        $("#spinner-weight-" + h).spinner();};
    //$('#wtable-1-5').append("<input id='spinner-weight-1'>");
    };

//http://www.quirksmode.org/js/cookies.html

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
};

function createCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function eraseCookie(name) {
    createCookie(name,"",-1);
}
</script>
<script>
// $("#tab-list li:eq(1)").addClass("active").show(); //Activate second tab
// $("#tabs-1").show();
// // $("div#tabs").tabs();
// var first_tab = $('#tabs-0');
// first_tab.hide();
// var first_tab_tab = $('#tab-tab-0')
// var second_tab_tab = $('#tab-tab-1')
// first_tab_tab.removeClass('ui-state-active', 'ui-tabs-active');
// second_tab_tab.addClass('ui-state-active', 'ui-tabs-active');

//ui-state-active, ui-tabs-active
//$('#tabs-1').tabs( "option", "active" );
// var active = $( ".selector" ).tabs( "option", "active" )
//     var tabs = $("li[data-carrier-id]");
//     //tabs.hide();
//     var firstVisibleTabIndex;
//     tabs.each(function (index) {
//       if ($(this).is(":visible")) {
//          firstVisibleTabIndex = index;
//          return false;
//        }
//      });
//      var jqTabs = $("#tabs").tabs();
//      jqTabs.tabs("option", "active", firstVisibleTabIndex);
 </script>
 <script>
 // $(document).ready(function(){
 //    var split_seg = [];
 //    var split_timestamp = [];
 //    // start up the SocketIO connection to the server - the namespace 'test' is also included here if necessary
 //    var socket = io.connect('http://' + document.domain + ':' + location.port + '/test');
 //    socket.on('my response', function(msg){console.log(msg.data)});
 //    console.log('socket:', socket);
 //    socket.on('newnumber', function(msg) {
 //        console.log("Received timestamps:", msg.number, typeof(msg.number), msg.number.length);
 //        timestamp = msg.number[0];
 //        segments = msg.number[1];
 //        console.log('timestamp:', timestamp);
 //        console.log('segments:', segments);
 //        loadGraphImages2 (timestamp, segments, window.images);
 //        });
 //    });
</script>
<script>

</script>
<script> 
$('#basic-toolbar').toggle();
//window.onload = StartTrackerData (); //dataWeights();
</script>
<script> //window.onload = startTracker3 ();</script>

</body>
</html>